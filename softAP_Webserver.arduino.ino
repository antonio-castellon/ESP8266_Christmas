#include <ESP8266WiFi.h>
#include <WiFiClient.h>
#include <ESP8266WebServer.h>


#define MY_BLUE_LED_PIN 2


IPAddress local_IP(192,168,4,1);
IPAddress gateway(192,168,4,1);
IPAddress subnet(255,255,255,0);

const char* ssid = "CASTELLON.CH";
const char* password = "merry_christmas";

ESP8266WebServer server(80); //Server on port 80

void handleRoot() {
 server.send(200, "text/html", "<html> <body><style>body, html{width:100%; height:100%; overflow:hidden; font-family: 'Press Start 2P', cursive;}.center{position:absolute; top:0; bottom: 0;left: 0;right: 0; color:#fff; display:flex; align-items:center;}h1{display:inline-block; padding-right:5px; padding-bottom: 5px; border-right:10px solid #fff; animation:blink 1s infinite; @media screen and (max-width: 370px){font-size: 5vw; border-right:4px solid #fff;}}@keyframes blink{0%{border-right-color:transparent;}50%{border-right-color:transparent;}51%{border-right-color:#fff;}100%{border-right-color:#fff;}}canvas{background:#000; width:100%; height:100%;}</style><link href='https://fonts.googleapis.com/css?family=Press+Start+2P' rel='stylesheet'><canvas id='snow'></canvas><div class='center'> <div style='width:100%;text-align:center;'> <h1 id='title'></h1> </div></div><script>var Txt={loop(i){t='8 bit snow! ... Merry Christmas! ;) ';d=document.getElementById('title'); console.log(' ...' + i + ' ...' + t.length) d.innerHTML=t.substring(0,i); if(i < t.length){i++;setTimeout(this.loop.bind(this), 200, i);}else{d.innerHTML=d.innerHTML + '<br/><br/>Are you a <a href='/ninja'>Ninja</a> &#63;';}}}var Snow={el: '#snow', density: 10000, // higher=fewer bits maxHSpeed: 5, // How much do you want them to move horizontally minFallSpeed: 2,canvas: null,ctx: null, particles: [], colors: [], mp: 1, quit: false, init(){this.canvas=document.querySelector(this.el); this.ctx=this.canvas.getContext('2d'); this.reset(); requestAnimationFrame(this.render.bind(this)); window.addEventListener('resize', this.reset.bind(this));}, reset(){this.w=window.innerWidth; this.h=window.innerHeight; this.canvas.width=this.w; this.canvas.height=this.h; this.particles=[]; this.mp=Math.ceil(this.w * this.h / this.density);for(var i=0; i < this.mp; i++){var size=Math.random()*4+5;this.particles.push({x: Math.random()*this.w, //x-coordinatey: Math.random()*this.h, //y-coordinatew: size,h: size,vy: this.minFallSpeed + Math.random(), //densityvx:(Math.random()*this.maxHSpeed) - this.maxHSpeed/2,fill: '#ffffff',s: (Math.random() * 0.2) - 0.1});}}, render(){this.ctx.clearRect(0, 0, this.w, this.h);this.particles.forEach((p,i)=>{p.y +=p.vy;p.x +=p.vx;this.ctx.fillStyle=p.fill;this.ctx.fillRect(p.x, p.y, p.w, p.h); if(p.x > this.w+5 || p.x < -5 || p.y > this.h){p.x=Math.random()*this.w; p.y=-10;}}); if(this.quit){return;}requestAnimationFrame(this.render.bind(this));}, destroy(){this.quit=true;}};Snow.init();Txt.loop(1);</script> </body></html>");
}

void ninja(){
 server.send(200, "text/html", "<meta name='monetization' content='$twitter.xrptipbot.com/remvst'><meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1.01'><title>Ninja vs EVILCORP</title><style>*{margin:0;width:100%;height:100%;background:#000;position:relative}#t{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}#g{display:block}</style><div id='t'><canvas id='g'></canvas></div><script>function W(t){let i=[],e=Array(20).fill(1);i.push(e);for(let t=0;t<18;t++){let t=Array(20).fill(0);t[0]=1,t[19]=1,i.push(t)}return i.push(e),t.forEach(([t,e,h,s])=>{for(let a=0;a<max(h,s);a++)i[t+a*!!h][e+a*!!s]=1}),i}let R,G,w=window,_u=g;df='Press [K] to change difficulty at any time',bS=((t,i,e)=>i<t?t:i>e?e:i),ae=((t,i,e)=>i>=t&&i<=e),N=((t,i)=>random()*(i-t)+t),bd=((t,i,e,h)=>sqrt((t-e)**2+(i-h)**2)),aw=((t,i)=>bd(t.x,t.y,i.x,i.y)),fv=(t=>hT(t,PI)),hS=((t,i)=>atan2(i.y-t.y,i.x-t.x)),fu=((t,i)=>round(t/i)*i),fq=(t=>t[~~(random()*t.length)]),hT=((t,i)=>((t%=2*i)>i&&(t-=2*i),t<-i&&(t+=2*i),t));let fp=Math;Object.getOwnPropertyNames(fp).forEach(t=>w[t]=w[t]||fp[t]),iO=2*PI;let _A=CanvasRenderingContext2D.prototype;_A.J=function(t){this.save(),t(),this.restore()},_A.fr=_A.fillRect,_A._=function(t){this.fillStyle=t},_A.hR=function(t,i,e,h,s){PI;let a=PI,r=PI/2;this.arc(s+t,s+i,s,-r,a,1),this.arc(s+t,h-s+i,s,a,r,1),this.arc(t+e-s,i+h-s,s,r,0,1),this.arc(t+e-s,i+s,s,0,-r,1)},_A.fn=function(t,i,e){this.beginPath(),this.arc(t,i,e,0,2*PI,1),this.fill()},_A.bQ=function(t,i,e){this.fillText(t,i,e),this.strokeText(t,i,e)},_A.bc=function(t,i,e){this.J(()=>{this._('#000'),fillText(t,i,e+5)}),this.fillText(t,i,e)},onresize=(()=>{var i,e,h=innerWidth,s=innerHeight,a=h/s,r=1600/_u.height,n=t.style;a<=r?e=(i=h)/r:i=(e=s)*r,n.width=i+'px',n.height=e+'px'}),hP=(t=>t),hO=(t=>t*(2-t)),fj=(t=>1+--t*t*t*t*t),fi=(t=>t*t*t*t*t),fh=(t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),P=((t,i,e,h,s,a,r,n)=>{let _=0,l={_d:f=>{let o=bS(0,((_+=f)-(a||0))/s,1);t[i]=(r||hP)(o)*(h-e)+e,o>=1&&(bN(bb,l),n&&n())}};bb.push(l)}),bb=[],fb=((t,i,e,h)=>{let s,a=hJ(t,i,e,h),r=hI(t,i,e,h);return a?r?_N=bd(t,i,a.x,a.y)<bd(t,i,r.x,r.y)?a:r:s=a:s=r,bd(t,i,_N.x,_N.y)>h&&(_N={x:t+cos(e)*h,y:i+sin(e)*h}),_N}),hJ=((t,i,e,h)=>{let s=sin(e)>0,a=40*~~(i/40)+(s?40:-1e-4),r=t+(a-i)/tan(e),n=s?40:-40,_=n/tan(e);return f_(r,a,_,n,h)}),hI=((t,i,e,h)=>{let s=cos(e)>0,a=40*~~(t/40)+(s?40:-1e-4),r=i+(a-t)*tan(e),n=s?40:-40,_=n*tan(e);return f_(a,r,n,_,h)}),f_=((t,i,e,h,s)=>{let a=t,r=i;for(;bd(a,r,t,i)<s;){if(ar(a,r))return{x:a,y:r};if(eY(a,r))break;a+=e,r+=h}return{x:a,y:r}}),_L=((t,i,e=0)=>ar(t,i)||ar(t-e,i-e)||ar(t-e,i+e)||ar(t+e,i-e)||ar(t+e,i+e)),ar=((t,i)=>!eY(t,i)&&G.B.S._C[_D(i)][_D(t)]),eY=((t,i)=>!ae(0,t,800)||!ae(0,i,800)),_D=(t=>~~(t/40)),dc=(t=>40*t),_k=(t=>dc(t+.5)),bN=((t,i)=>{let e=t.indexOf(i);e>=0&&t.splice(e,1)}),bM=(t=>{let i=new Uint32Array([imul(t,2246822507),imul(t,3266489909)]),e=()=>{let t=i[0],e=i[1]^t;return i[0]=(t<<26|t>>8)^e^e<<9,i[1]=e<<13|e>>19,(imul(t,2654435771)>>>0)/4294967295};return{ae:(t,i)=>e()*(i-t)+t,cZ:e}}),eV=(t=>(t<10?'0':'')+~~t),eU=(t=>eV(~~(t/60))+':'+eV(~~t%60)+'.'+eV(t%1*100)),loop=((t,i)=>{let e=performance.now(),h=()=>{let s=performance.now(),a=min((s-e)/1e3,100);e=s,t(a,~~(1/a)),i(h)};h()});let _$=(t,i,e)=>{let h=document.createElement('canvas');return h.width=t,h.height=i,e(h.getContext('2d'),h)||h};aZ=((t,i,e)=>{let h=_$(t,i,e),s=h.getContext('2d').createPattern(h,'repeat');return s.width=t,s.height=i,s}),ap=((t,i,e,h)=>_$(40*i,40*t,(t,i)=>{let s;s=(i.height-h.height)*e,t.drawImage(h,(i.width-h.width)/2,s)})),hC=_$(1,1,t=>{let i=location;t.font='99pt d';let e=t.measureText(i).width;return['Impact','Arial Black'].filter(h=>(t.font='99pt '+h,t.measureText(i).width!=e))[0]||'serif'}),font=(t=>t+'pt '+hC),ac=(t=>'italic '+font(t)),ao=_$(24,160,(t,i)=>{let e=t.createLinearGradient(0,0,0,160);e.addColorStop(0,'rgba(255,255,255, 0)'),e.addColorStop(.5,'rgba(255,255,255, 0.5)'),e.addColorStop(1,'rgba(255,255,255, 0)'),t._(e),t.fr(0,0,99,999)}),d$=_$(160,160,(t,i)=>{let e=t.createRadialGradient(i.width/2,i.height/2,0,i.width/2,i.height/2,i.width/2);e.addColorStop(.5,'rgba(255,255,255, 0.5)'),e.addColorStop(1,'rgba(255,255,255, 0)'),t._(e),t.fr(0,0,999,999)}),bI=_$(240,240,(t,i)=>{let e=t.createRadialGradient(i.width/2,i.height/2,0,i.width/2,i.height/2,i.width/2);e.addColorStop(.5,'rgba(255,0,0, 0.5)'),e.addColorStop(1,'rgba(255,0,0, 0)'),t._(e),t.fr(0,0,999,999)}),hA=aZ(80,80,(t,i)=>{t._('#67b'),t.fr(0,0,999,999),t._('#235'),t.fr(i.width/10,i.height/4,8*i.width/10,i.height/2)}),hz=aZ(800,400,(t,i)=>{t._('#457'),t.fr(0,0,i.width,999),t._(hA),t.fr(0,10,i.width,i.height-20)}),hy=aZ(80,80,(t,i)=>{t.fillStyle=t.strokeStyle='#111',t.lineWidth=4,t.fr(0,0,99,99),t.clearRect(4,4,i.width-8,i.height-8),t.beginPath(),t.moveTo(0,0),t.lineTo(99,99),t.moveTo(i.width,0),t.lineTo(0,i.height),t.stroke()}),eO=(()=>{beginPath(),moveTo(50,0),lineTo(-50,50),lineTo(-50,-50),fill()}),aY=_$(32,48,(t,i)=>{let e=t.createLinearGradient(0,0,i.width,i.height);e.addColorStop(0,'rgba(255,255,255,0)'),e.addColorStop(.25,'rgba(255,255,255,0.3)'),e.addColorStop(.5,'rgba(255,255,255,0.1)'),e.addColorStop(.75,'rgba(255,255,255,0.3)'),e.addColorStop(1,'rgba(255,255,255,0)'),t._(e),t.fr(0,0,i.width,i.height),t._('#888'),t.fr(0,0,i.width,2),t.fr(0,i.height,i.width,-2),t.fr(0,0,2,i.height),t.fr(i.width,0,-2,i.height),t.fr(0,.7*i.height,i.width,4)}),hx=ap(2,1,.5,aY),bH=_$(44,20,(t,i)=>{t._('#000'),t.fr(2,0,2,i.height),t.fr(i.width-2,0,-2,i.height),t._('#494742'),t.fr(0,0,99,4),t._('#ccc'),t.fr(4,4,i.width/4,i.height/3),t.fr(i.width-4,4,-i.width/4,i.height/3)}),bG=_$(24,24,(t,i)=>{t._('#000'),t.fr(0,0,99,99),t._('#a9a9a9'),t.fr(2,2,i.width-4,i.height-4),t._('#4253ff'),t.fr(4,4,i.width-8,i.height-12),t._('#000'),t.fr(4,i.height-6,i.width-8,2),t._('#a5dc40'),t.fr(i.width-6,i.height-6,2,2)}),hw=ap(1,1,.5,_$(24,32,(t,i)=>{t._('#925e2a'),t.fr(0,0,99,99),t._('#fcf3d7'),t.fr(4,4,i.width-8,i.height-8),t._('#ccc'),t.fr(i.width/2-5,i.height/2-5,10,10)})),hv=ap(1,2,1,bH),hu=ap(1,1,1,_$(12,16,(t,i)=>{t._('#4c80be'),t.fr(0,0,99,99),t._('#78a1d6'),t.fr(0,0,99,4)})),ht=ap(1,1,.75,_$(8,8,(t,i)=>{t._('#fff'),t.fr(0,0,99,99)})),eN=ap(3,10,0,_$(200,120,(t,i)=>{let e=t.createRadialGradient(i.width/2,0,0,i.width/2,0,i.height);e.addColorStop(0,'rgba(255,255,255,0.2)'),e.addColorStop(1,'rgba(255,255,255,0)'),t._(e),t.beginPath(),t.moveTo(i.width/2,0),t.arc(i.width/2,0,i.height,PI/6,5*PI/6,0),t.fill()})),eM=[['#000',600],['#222',500],['#333',300]].map(([t,i])=>aZ(400,i,(e,h)=>{e._(t);let s=bM(5*i),a=0;for(;a<h.width;){let t=~~s.ae(80,120);e.fr(a,200*s.cZ(),t,i),a+=t}})),hs=_$(1,800,t=>{let i=t.createLinearGradient(0,0,0,800);return i.addColorStop(0,'#00032c'),i.addColorStop(.7,'#14106f'),i}),hr=aZ(160,240,(t,i)=>{t._('#000'),t.globalAlpha=.05,t.fr(0,0,160,2),t.fr(0,120,160,2),t.fr(0,0,2,120),t.fr(80,120,2,400)}),eK=['#29c2fd','#ffbbb9','#c0a4ff','#5ce5b8','#ffc4ec'],hq=((t,i=.5)=>{let e=parseInt(t.slice(1),16);return'#'+(i*(e>>16)<<16|i*(e>>8&255)<<8|i*(255&e)).toString(16).padStart(6,'0')}),hp=(t=>_$(800,800,(i,e)=>{i._(t.backgroundColor),i.fr(0,0,800,800),i._(hr),i.fr(0,0,800,800);let h=i.createRadialGradient(0,0,0,0,0,800);h.addColorStop(0,'rgba(255,255,255,0.5)'),h.addColorStop(1,'rgba(255,255,255,0)'),i._(h),i.fr(0,0,800,800);let s=bM(1),a=t.S._C,r=a.map(t=>t.slice()),[n]=t.S.aX||[0];for(let e=1;e<19;e++)for(let h=1;h<19;h++){if(r[e][h]||abs(e-n)<1||abs(e-t.S.am[0])<2&&abs(h-t.S.am[1])<2)continue;let _=(t,a)=>{if(s.cZ()>.2)return;for(let i=0;i<t.height/40;i++)for(let s=0;s<t.width/40;s++)if(r[e+i][h+s])return;for(let i=0;i<t.height/40;i++)for(let s=0;s<t.width/40;s++)r[e+i][h+s]=1;let n=dc(h),_=dc(e);a&&a(n,_),i.drawImage(t,n,_)},l=r[e][h],f=r[e][h+1],o=r[e+1][h],c=(r[e-1][h],r[e+2]&&r[e+2][h]),d=r[e+1][h+1];!l&&o&&(_(hu),_(ht)),!a[e-1][h]||a[e][h]||a[e+1][h]||h%2||i.drawImage(eN,40*(h+.5)-eN.width/2,40*e),!o&&c&&(_(hw),_(hx,(t,e)=>{i.clearRect(t+(40-aY.width)/2,e+(80-aY.height)/2,aY.width,aY.height)})),o&&!f&&d&&_(hv)}}));class eH{constructor({x:t,y:i,O:e=1,_J:h='#f00',_f:s=[5,5],aU:a=[1,-1],cT:r}){this._J=h,this._f=s,P(this,'x',t[0],t[0]+t[1],e),P(this,'y',i[0],i[0]+i[1],e),P(this,'aU',a[0],a[0]+a[1],e),P(this,'_f',s[0],s[0]+(s[1]||0),e,0,0,r)}__(){R.globalAlpha=this.aU,_(this._J),fr(this.x-this._f/2,this.y-this._f/2,this._f,this._f)}}class cS{constructor(t,i,e){this.title=t,this.cR=i,this.cQ=e||'',this.hl=this.hk=9999,this.iJ=0,this.eG=1}cP(){P(this,'hl',-800,400,.5,0,fj),P(this,'hk',2400,400,.5,1,fj),P(this,'iJ',0,1,.3)}cO(){P(this,'hl',400,2400,.5,0,fi),P(this,'hk',400,-800,.5,0,fi,()=>G._e=0),P(this,'iJ',1,0,.3,.2)}__(){translate(400,0),this.eG&&(beginPath(),rect(0,0,800,800),clip(),_('rgba(0,0,0,'+.8*this.iJ+')'),fr(0,0,800,800)),R.textAlign='center',R.textBaseline='middle',_('#fff'),R.font=ac(24),bc(this.title,this.hl,375),R.font=ac(48),bc(this.cR,this.hk,425),_('#888'),R.font=ac(16),bc(this.cQ,400,780)}}hj=((t,i,e,h,s,a)=>J(()=>{R.fillStyle=R.strokeStyle=a,R.lineWidth=2,beginPath(),moveTo(t,i);let r=PI/100,n=ceil(fv(h-e)/r);for(let a=0;a<=n;a++){let _=a/n*(h-e)+e;a&&a<n&&(_=fu(_,r));let l=fb(t,i,_,s);lineTo(l.x,l.y)}closePath(),R.globalAlpha=.3,fill(),R.globalAlpha=.8,stroke()}));let aT=6,bF=17,aS=2*bF-8,cL=2*bF-4;eE=(t=>_$(aS,cL+aT,(i,e)=>{i._('#000'),i.beginPath(),i.hR(0,0,e.width,cL,6),i.fill(),i.globalCompositeOperation='source-atop',t(i,e)})),eD=eE((t,i)=>{t._('#daab79'),t.fr(i.width,6,-aS/2-4,6),t._('#400'),t.fr(0,cL-10,99,4)}),hi=eE((t,i)=>{t._('#a3b5ce'),t.fr(0,0,99,99),t._('#daab79'),t.fr(0,0,99,14),t._('#010640'),t.fr(0,25,99,99),t._('#f00'),t.fr(aS-6,14,2,10)}),bE=((t,i,e,h,s,a,r)=>{t.scale(s,1),J(()=>{a&&t.rotate(sin(i*PI*2/.25)*PI/32),t.rotate(r*PI*2),t.translate(-e.width/2,-e.height/2),t.drawImage(e,0,0),hg(t,i)}),h&&hf(t,i,a)}),hg=((t,i)=>{t._('#000');let e=i%4,h=min(1,max(3.85-e,e-3.85)/.15);t.fr(aS-1,7,-4,4*h),t.fr(aS-8,7,-4,4*h)}),hf=((t,i,e)=>{t._('#000');let h=.5*sin(i*PI*2/.25)+.5,s=e?h:1,a=e?1-h:1;t.fr(-8,bF-aT,4,s*aT),t.fr(8,bF-aT,-4,a*aT)}),ey=((t,i,e)=>{R.lineWidth=8,R.strokeStyle='#000',R.lineJoin='round',beginPath(),moveTo(i.x,i.y);let h=50;for(let t=0;t<e.length&&h>0;t++){let s=e[t],a=e[t-1]||i,r=aw(s,a),n=min(r,h);h-=n;let _=n/r;lineTo(a.x+_*(s.x-a.x),a.y+_*(s.y-a.y))}stroke()});class hc{constructor(t,i,e){this.B=t,this.x=i,this.y=e,this.U={},this.a$=this._t=0,this.T=1,this._j=0,this.cH=1,this.aR=0,this.aQ=1,this.bD=0,this.ev=0,this.bC=0,this.cG={x:0,y:0},this.aP={x:0,y:0,h_:0},this.iI=0,this.H=0,this._i=[]}get _s(){let t=this.x-15,i=this.x+15-1,e=this.y+15+1;return _L(t,e)||_L(i,e)}get hb(){return this.aQ?this.eu&&!this._r?0:aw(this,this.cG)>5&&abs(this.x-this.aP.x)>20?0:1:0}get eu(){return this.H<this.aO+this.bC}_d(t){let i=t;do{let t=min(i,1/60);i-=t,this.ha(t)}while(i>0)}ha(t){this.U.x=this.x,this.U.y=this.y,this.U.H=this.H,this.U.T=this.T,this.U._s=this._s,this.U.aR=this.aR,this.H+=t;let i=aN.et();if(this.aQ=this.aQ||!i,i?this.aR+=t:this.aR=0,i&&this.hb&&(this.aQ=0,this.bD=this.y,this.aO=this.H,this._r&&(this.a$=800*this.aP.h_),this._t=0,h$()),i&&!this.aQ){let t=min(this.aR,.2)/.2,i=max(.33,fu(t,.33)),e=20+40*i*3;this.bC=.1+.2*i,this.ev=this.bD-e}if(this.eu){let t=(this.H-this.aO)/this.bC;this.y=hO(t)*(this.ev-this.bD)+this.bD}else{let i=this._r&&this._t>0?100:4e3;this._t=max(0,this._t+i*t),this._r&&(this._t=min(this._t,200)),this.y+=this._t*t}let e=0,h=0;aN.left()&&(e=-1,h=-400),aN.eI()&&(e=1,h=400),this._s&&e&&(this.T=e),this.T!=this.U.T&&P(this,'cH',-1,1,.1),this._j=e;let s=(this._s,3e3);this.a$+=bS(-s*t,h-this.a$,s*t),this.x+=this.a$*t,this.gX(),this._s&&(this.cG.x=this.x,this.cG.y=this.y),this._i.forEach(i=>i.y+=100*t);let a=this._i.length>100?this._i.pop():{};if(a.x=this.x-5*this.T,a.y=this.y-10+N(-3,3)*sign(this.a$),this._i.unshift(a),!this._s&&!this._r&&this.B.H){let{cC:t,x:i,y:e}=this,h={__:()=>{R.globalAlpha=h.aU,translate(i,e),bE.apply(0,t)}};this.B._b.push(h),P(h,'aU',.1,0,.5,.2,0,()=>{bN(this.B._b,h)})}if(this._r)for(let t=0;t<10;t++)this.B._q({_f:[6],_J:'#fff',O:N(.4,.8),x:[this.x-15*this._r,N(-20,20)],y:[this.y+N(-15,15),N(-20,20)]})}gW(t,i){let e,h=999;for(let s=0;s<i.length;s++){let a=aw(t,i[s]);a<h&&(e=i[s],h=a)}return e&&(this.x=e.x,this.y=e.y),e}gV(){let t=this.x-15,i=this.x+15,e=this.y-15,h=this.y+15,s=_D(t),a=_D(i),r=_D(e),n=_D(h),_=(_L(t,e),_L(i,e),_L(t,h),_L(i,h),[this.U.x,this.x]),l=[this.U.y,this.y];for(let t=s;t<=a;t++)_.push(40*t+15,40*(t+1)-15-.001);for(let t=r;t<=n;t++)l.push(40*t+15,40*(t+1)-15-.001);let f=[];return _.forEach(t=>l.forEach(i=>{_L(t,i,15)||f.push({x:t,y:i})})),f}aK(t){for(let i=0;i<10;i++)this.B._q({_f:[8],_J:'#fff',O:N(.4,.8),x:[this.x+N(-15,15),N(-20,20)],y:[t,sign(this.y-t)*N(15,10)]});gQ()}cz(){for(let t=0;t<100;t++)this.B._q({_f:[10,-10],_J:'#000',O:N(1,2),x:[this.x+1.5*N(-15,15),N(-20,20)],y:[this.y+1.5*N(-15,15),N(-20,20)]})}gX(){let{x:t,y:i}=this,e=this.gV();this.gW(this,e);this._s?(this._t=min(0,this._t),this.U._s||(this.aK(this.y+15),this.aO=-1)):this.y>i&&(this.aK(this.y-15),this._t=max(0,this._t),this.aO=-1);let h=this.x!=t,s=sign(this.x-t);h&&s!=sign(this.a$)&&(this.a$=0),h&&!this._s&&(this._r=s),(this._s||this.x!=this.U.x&&!h)&&(this._r=0);let a=this.x-15-1,r=this.x+15+1;_L(a,this.y)||_L(r,this.y)||(this._r=0),this._r&&(this.aP.x=this.x,this.aP.y=this.y,this.aP.h_=this._r)}get cC(){return[R,this.B.H,eD,this._s,this.T*this.cH,this._j,bS(0,(this.H-this.aO)/this.bC,1)]}__(){ey(R,this,this._i),J(()=>{translate(this.x,this.y),bE.apply(0,this.cC)})}}class gO{constructor(t,i,e){this.B=t,this.x=i,this.y=e}_d(t){this.B._H&&aw(this,this.B._H)<20&&this.B.gN()}__(){J(()=>{translate(this.x,this.y),drawImage(d$,-d$.width/2,-d$.height/2),[G.H*PI,-G.H*PI/2,G.H*PI/4].forEach(t=>{J(()=>{rotate(t),drawImage(ao,-ao.width/2,-ao.height/2)})})});let t=bG.height+bH.height,i=_D(this.y);translate(this.x,40*(i+1)-t),drawImage(bG,-bG.width/2,0),drawImage(bH,-bH.width/2,bG.height)}}class ek{constructor(t){this.B=t,this.L=0,this.aJ=0,this.V=100,this._g=0}get cv(){return G._p.iC*this.V}_d(){this.aI||(this.aI=this.gM,this.aI&&this.B.gL())}get gM(){if(G._p.gK)return 0;let t=hS(this,this.B._H),i=aw(this,this.B._H);if(i<15+this._g)return 1;if(abs(fv(this.L-t))>this.aJ||i>this.cv)return 0;let e=fb(this.x,this.y,t,this.cv);return aw(this,e)>=i}__(){let t=this.aI?'#f00':'#ff0';G._p.gK&&(t='#888'),hj(this.x,this.y,this.L-this.aJ,this.L+this.aJ,this.cv,t)}}class gJ extends ek{constructor(t,i){super(t),this._X=i,this.V=400,this.aJ=.4}_d(t){this.aI||this._X.update(this,this.B.H),super._d(t)}__(){super.__(),J(()=>{translate(this.x,this.y),rotate(this.L),_('#888'),fr(-10,-5,20,10),_('#444'),fr(10,-2,4,4),_(this.B.H%2>1?'#f00':'#0f0'),fr(6,-3,2,2)})}}class gI extends ek{constructor(t,i){super(t),this._X=i,this.V=200,this.aJ=.7,this.T=1,this.cH=1,this._g=7.5}_d(t){let{T:i}=this;this.aI?(this.T=sign(this.B._H.x-this.x),this._j=0):this._X.update(this,this.B.H),this.L=this.T>0?0:PI,super._d(t),i!=this.T&&(P(this,'cH',-1,1,.1),P(this,'V',0,200,.2))}__(){super.__(),J(()=>{translate(this.x,this.y),bE(R,this.B.H,hi,1,this.T*this.cH,this._j,0)})}}class eh{constructor(){this.aH=[],this.bA=0,this.bz=0}_W(t){return this.bz=t,this}add(t,i){return this.aH.push([t,this.bA,i]),this.bA+=t,this}update(t,i){if(this.ef(t),!this.aH.length)return;let e=(this.bz+i+this.bA)%this.bA,h=this.aH.length-1;for(;this.aH[h][1]>e;)h--;let[s,a,r]=this.aH[h];r(t,(e-a)/s)}}class I extends eh{constructor(t,i,e){super(),this._y=e,this.x=_k(i),this.y=_k(t)}Y(t){let{_y:i}=this;return this.add(t,t=>{t.L=i})}_G(t,i){let{_y:e}=this;return this._y=i,this.add(t,(t,h)=>{t.L=h*(i-e)+e})}aj(t,i){return this._G(t,this._y+i)}ef(t){t.x=this.x,t.y=this.y,t.L=this._y}D(t,i,e){let{_y:h}=this;return this.Y(e)._G(t,i).Y(e)._G(t,h)}}class K extends eh{constructor(t,i){super(),this.eb=1,this._w=_k(i),this.y=_k(t)+5}Y(t){let{eb:i,_w:e}=this;return this.add(t,t=>{t._j=0,t.x=e})}ea(t){let{_w:i}=this,e=_k(t),h=abs(this._w-e)/80,s=sign(e-i);return this._w=e,this.eb=s,this.add(h,(t,h)=>{t.T=s,t._j=1,t.x=h*(e-i)+i})}ef(t){t.y=this.y,t.x=this._w}D(t,i,e){let h=_D(this._w);return this.Y(t).ea(i).Y(e).ea(h)}}class gz{constructor(t,i){this._a=t,this.S=i,this.e_=0,this.backgroundColor=eK[t%eK.length],this.gy=hq(this.backgroundColor,.2),this.stop()}e$(t){this.bx||(this.bx=1,t())}gN(){this.e$(()=>{gx();let t=_c[this._a+1];G._e=new cS(fq(['SEARCHING FOR EVIL PLANS...','GET http://evil.corp/plans.pdf','GET http://localhost/evil-plans.pdf','BROWSING FILES...']),t?fq(['404 NOT FOUND','FILE NOT FOUND','NOTHING HERE']):'200 FOUND!'),G._e.cP(),setTimeout(()=>{(t?gw:gv)()},1e3),setTimeout(()=>{G._e.cO()},2e3),setTimeout(()=>{t?G.fw():G.gu()},2500)})}gL(){this.e$(()=>{this.e_++,G._e=new cS('YOU WERE FOUND!','PRESS [R] TO TRY AGAIN',df.toUpperCase()),G._e.cP(),gt(),setTimeout(()=>{this.bx&&(this.dZ=1)},1e3)})}bw(){this.bx=0,this.cs=0,this.H=0,this._V=[],this._b=[],this._H=new hc(this,_k(this.S.cz[1]),_k(this.S.cz[0])),this._V.push(this._H);let t=new gO(this,_k(this.S.am[1]),_k(this.S.am[0]));this._V.push(t),this._b.push(t),this.S.iB.forEach(t=>{let i=new gJ(this,t);this._V.push(i),this._b.push(i)}),this.S.iA.forEach(t=>{let i=new gI(this,t);this._V.push(i),this._b.push(i)}),this._V.forEach(t=>{t._d(0)})}cr(){this.cs=1,this._H.cz(),this._b.push(this._H)}stop(){this._V=[],this._b=[]}_d(t){t*=G._p.iz,this.cs&&!this.bx&&(this.H+=t,this._V.forEach(i=>i._d(t))),(aN.et()&&this.dZ||M[82]&&this.cs)&&(this.dZ=0,G._e&&(G._e.cO(),!G.dY&&this.e_>3&&(G.dY=1,alert(df))),this.bw(),setTimeout(()=>this.cr(),1e3),cq())}__(){this.dh=this.dh||hp(this),drawImage(this.dh,0,0),J(()=>{let t=bS(0,3*(this.H-1),1);R.globalAlpha=t,translate(0,-10*(1-t));let[i,e]=this.S.aX||[0,''];R.textAlign='center',R.textBaseline='middle',R._('rgba(255,255,255,0.7)'),R.font=font(26),fillText(e,400,_k(i))}),this._b.forEach(t=>J(()=>t.__())),R._(this.gy);for(let t=0;t<20;t++)for(let i=0;i<20;i++)this.S._C[t][i]&&fr(40*i,40*t,40,40)}_q(t){let i;t.cT=(()=>bN(this._b,i)),this._b.push(i=new eH(t))}}function gp(){this.gn=function(t){for(var i=0;i<24;i++)this[String.fromCharCode(97+i)]=t[i]||0;this.c<.01&&(this.c=.01);var e=this.b+this.c+this.e;if(e<.18){var h=.18/e;this.b*=h,this.c*=h,this.e*=h}}}function gm(){var t,i,e,h,s,a,r,n,_,l,f,o;this.bv=new gp,this.dR=function(){var t=this.bv;h=100/(t.f*t.f+.001),s=100/(t.g*t.g+.001),a=1-t.h*t.h*t.h*.01,r=-t.i*t.i*t.i*1e-6,t.a||(f=.5-t.n/2,o=5e-5*-t.o),n=1+t.l*t.l*(t.l>0?-.9:10),_=0,l=1==t.m?0:(1-t.m)*(1-t.m)*2e4+32},this.gl=function(){this.dR();var h=this.bv;return t=h.b*h.b*1e5,i=h.c*h.c*1e5,e=h.e*h.e*1e5+12,3*((t+i+e)/3|0)},this.gk=function(c,d){var b=this.bv,g=1!=b.s||b.v,G=b.v*b.v*.1,w=1+3e-4*b.w,u=b.s*b.s*b.s*.1,I=1+1e-4*b.t,p=1!=b.s,P=b.x*b.x,x=b.g,y=b.q||b.r,m=b.r*b.r*b.r*.2,R=b.q*b.q*(b.q<0?-1020:1020),A=b.p?32+((1-b.p)*(1-b.p)*2e4|0):0,S=b.d,T=b.j/2,D=b.k*b.k*.01,C=b.a,E=t,B=1/t,H=1/i,O=1/e,k=5/(1+b.u*b.u*20)*(.01+u);k>.8&&(k=.8),k=1-k;for(var J,v,z,L,K,U,M=0,W=0,Y=0,$=0,j=0,V=0,q=0,Z=0,F=0,Q=0,X=0,tt=new Array(1024),it=new Array(32),et=tt.length;et--;)tt[et]=0;for(et=it.length;et--;)it[et]=N(-1,1);for(et=0;et<d;et++){if(M)return et;if(A&&++Q>=A&&(Q=0,this.dR()),l&&++_>=l&&(l=0,h*=n),(h*=a+=r)>s&&(h=s,x>0&&(M=1)),v=h,T>0&&(v*=1+sin(X+=D)*T),(v|=0)<8&&(v=8),C||((f+=o)<0?f=0:f>.5&&(f=.5)),++Y>E)switch(Y=0,++W){case 1:E=i;break;case 2:E=e}switch(W){case 0:$=Y*B;break;case 1:$=1+2*(1-Y*H)*S;break;case 2:$=1-Y*O;break;case 3:$=0,M=1}y&&((z=0|(R+=m))<0?z=-z:z>1023&&(z=1023)),g&&w&&((G*=w)<1e-5?G=1e-5:G>.1&&(G=.1)),U=0;for(var ht=8;ht--;){if(++Z>=v&&(Z%=v,3==C))for(var st=it.length;st--;)it[st]=N(-1,1);switch(C){case 0:K=Z/v<f?.5:-.5;break;case 1:K=1-Z/v*2;break;case 2:K=.225*(((K=1.27323954*(L=6.28318531*((L=Z/v)>.5?L-1:L))+.405284735*L*L*(L<0?1:-1))<0?-1:1)*K*K-K)+K;break;case 3:K=it[abs(32*Z/v|0)]}g&&(J=q,(u*=I)<0?u=0:u>.1&&(u=.1),p?(V+=(K-q)*u,V*=k):(q=K,V=0),j+=(q+=V)-J,K=j*=1-G),y&&(tt[F%1024]=K,K+=tt[(F-z+1024)%1024],F++),U+=K}U*=.125*$*P,c[et]=U>=1?32767:U<=-1?-32768:32767*U|0}return d}}_c=[{_C:W([[6,1,4,0],[6,2,4,0],[6,3,0,2],[6,11,0,8],[9,5,5,0],[9,6,0,3],[10,8,3,0],[12,9,0,4],[13,1,2,0],[13,2,2,0],[13,16,0,3],[16,10,0,7],[18,5,0,3]]),cz:[16,2],am:[5,17],aX:[3,'PRESS [SPACE] TO JUMP, HOLD TO JUMP HIGHER'],iB:[],iA:[]},{_C:W([[6,3,0,13],[7,7,7,0],[7,13,3,0],[7,14,3,0],[7,15,4,0],[9,1,0,3],[10,3,2,0],[11,11,8,0],[14,15,0,4],[17,6,0,5],[18,6,0,5],[18,12,0,7]]),cz:[16,2],am:[5,4],aX:[3,'WALL JUMPS GET YOU HIGHER'],iB:[],iA:[]},{_C:W([[2,11,0,4],[3,16,3,0],[4,4,5,0],[4,5,0,3],[5,11,1,0],[5,15,1,0],[7,2,0,2],[8,5,1,0],[8,8,0,11],[10,1,3,0],[10,2,3,0],[12,3,0,12],[13,3,4,0],[13,14,3,0],[15,8,0,4],[15,15,1,0],[16,4,0,2],[17,18,1,0]]),cz:[16,2],am:[7,17],aX:[13.5,'AVOID CAMERAS'],iB:[new I(16,9.5,PI/2),new I(5,6.5,3*PI/4).D(2,PI/4,1),new I(3,12,PI/2).D(2,PI/9,1)],iA:[]},{_C:W([[4,2,0,6],[4,10,0,3],[4,15,0,4],[5,3,0,3],[5,11,3,0],[5,16,3,0],[5,17,3,0],[5,18,3,0],[6,3,0,3],[7,4,0,5],[10,8,0,10],[11,2,0,2],[11,6,0,3],[12,3,3,0],[13,16,0,3],[16,8,0,3],[16,13,0,4],[17,10,1,0]]),cz:[17,2],am:[3,17],aX:[13,'OBSERVE PATROLS'],iB:[new I(4,13.5,PI/5).D(3,4*PI/5,1)],iA:[new K(6,6).D(2,8,2),new K(15,13).D(2,16,2)]},{_C:W([[2,14,3,0],[3,1,0,10],[4,15,4,0],[4,16,0,2],[7,4,3,0],[7,8,3,0],[7,12,0,2],[7,18,3,0],[9,3,1,0],[9,5,0,3],[9,9,0,9],[11,1,4,0],[13,4,2,0],[14,2,0,2],[14,7,2,0],[14,8,2,0],[14,11,0,2],[14,15,0,2],[17,17,2,0],[17,18,2,0]]),cz:[16,2],am:[3,16],aX:[11,'STUDY THE PATTERNS'],iB:[new I(12.5,5.5,PI/2).Y(3).aj(5,2*-PI)._W(2),new I(12.5,9.5,PI/2).Y(3).aj(5,2*-PI)._W(2.5),new I(12.5,13.5,PI/2).Y(3).aj(5,2*-PI)._W(3),new I(5,14,7*PI/8).D(1,PI/2,2)],iA:[new K(2,1).D(1,10,1)]},{_C:W([[3,8,0,2],[4,12,3,0],[4,13,1,0],[4,16,0,3],[5,17,4,0],[5,18,4,0],[6,5,0,7],[7,1,1,0],[9,6,0,2],[9,12,0,2],[10,2,0,2],[12,5,0,10],[13,5,3,0],[13,14,4,0],[13,17,0,2],[15,1,0,4],[15,9,0,2],[16,15,0,2],[18,8,0,4]]),cz:[16,2],am:[3,17],iB:[new I(1,8.5,PI/4).D(2,2*PI/3,1)],iA:[new K(17,8).D(1,11,1),new K(11,5).D(1,14,1)]},{_C:W([[3,4,0,7],[3,12,0,2],[3,15,3,0],[4,7,2,0],[4,10,2,0],[5,4,1,0],[5,11,0,4],[5,16,0,3],[6,1,1,0],[8,6,3,0],[8,7,1,0],[8,10,0,5],[9,1,0,5],[9,12,1,0],[10,17,0,2],[13,9,0,3],[13,15,0,2],[16,5,0,4],[16,11,0,4],[16,17,0,2]]),cz:[16,2],am:[4,17],iB:[new I(4.5,5.5,0).aj(5,2*PI)],iA:[new K(15,5).D(1,8,1),new K(15,11).D(1,14,1),new K(2,12).D(2.5,13,2.5)]},{_C:W([[1,8,16,0],[1,9,7,0],[2,13,2,0],[3,14,0,3],[4,4,0,3],[5,6,14,0],[5,18,14,0],[7,2,0,2],[7,10,0,2],[7,16,12,0],[7,17,12,0],[10,1,6,0],[10,2,6,0],[10,3,6,0],[10,13,0,3],[13,9,0,3],[16,13,0,3]]),cz:[17,2],am:[2,15],iB:[new I(5,4.5,PI/2).D(1,PI,2)],iA:[new K(15,13).D(1,15,2.5),new K(12,11).D(1,9,2.5)._W(-.5),new K(9,13).D(1,15,2.5)._W(-1)]},{_C:W([[1,6,1,0],[1,18,4,0],[2,10,0,2],[3,11,0,4],[4,6,3,0],[4,17,1,0],[6,5,1,0],[6,7,0,2],[6,10,0,2],[7,11,2,0],[7,15,2,0],[7,16,4,0],[8,12,0,3],[9,3,0,2],[10,17,0,2],[12,5,0,8],[13,5,4,0],[13,12,4,0],[14,1,0,4],[14,13,3,0],[14,14,3,0],[15,8,0,2],[16,15,0,2],[18,8,0,2]]),cz:[16,2],am:[2,13],iB:[new I(12,1,0).D(1,-PI/3,1),new I(7,18,PI/2).D(1,5*PI/4,1)],iA:[new K(17,8).D(1.1,9,1.1)]},{_C:W([[4,5,0,4],[4,11,0,2],[4,15,0,4],[5,1,0,2],[5,5,1,0],[6,16,1,0],[8,1,3,0],[8,2,3,0],[8,3,3,0],[9,9,4,0],[9,10,3,0],[9,13,3,0],[9,14,2,0],[10,4,0,5],[10,15,0,2],[11,11,0,2],[12,18,7,0],[14,5,0,3],[14,11,0,3],[15,3,2,0],[15,13,1,0],[15,15,4,0],[15,16,4,0],[15,17,4,0],[16,1,0,2],[17,6,0,7]]),cz:[14,2],am:[3,17],iB:[new I(10,11.5,PI/2).Y(1).aj(1,PI).Y(1).aj(1,PI)],iA:[new K(16,6).D(2,12,2),new K(16,12).D(2,6,2),new K(7,1).D(1,3,1)]},{_C:W([[3,6,3,0],[4,14,2,0],[5,4,0,2],[5,9,0,3],[5,15,0,2],[8,3,0,5],[8,12,0,3],[8,17,0,2],[9,5,3,0],[9,6,3,0],[9,13,3,0],[9,14,3,0],[11,1,2,0],[11,2,1,0],[11,15,0,2],[14,4,0,3],[14,13,3,0],[14,14,3,0],[14,15,1,0],[15,5,4,0],[15,6,2,0],[16,1,0,2],[16,7,0,3],[16,12,1,0],[16,17,0,2]]),cz:[18,2],am:[18,8],aX:[9.5,'BE PATIENT'],iB:[new I(13,8,PI).D(1,PI/2,3),new I(13,11,PI/2).D(1,0,3)],iA:[new K(7,7).D(2,3,2),new K(7,12).D(2,14,2),new K(18,6).D(0,18,0)._W(2)]},{_C:W([[3,6,6,0],[4,1,0,3],[4,7,4,0],[4,8,1,0],[4,10,0,3],[5,11,0,3],[5,16,0,3],[6,11,0,2],[8,4,5,0],[8,5,1,0],[8,11,0,4],[10,17,0,2],[12,1,0,3],[12,7,0,5],[13,13,0,3],[16,4,0,5],[16,11,0,3],[16,17,0,2]]),cz:[18,2],am:[11,2],iB:[new I(13.5,9.5,5*PI/6).D(1,PI/2,1),new I(9,12.5,PI/6).D(1,5*PI/6,1)],iA:[new K(4,18).D(1,16,1),new K(3,1).D(1,3,1)]},{_C:W([[3,6,0,4],[4,3,2,0],[4,4,1,0],[4,9,9,0],[4,16,2,0],[5,2,1,0],[5,10,0,6],[7,4,1,0],[8,1,6,0],[8,6,0,3],[8,13,8,0],[8,14,0,2],[9,5,0,4],[10,2,4,0],[10,7,3,0],[10,8,3,0],[12,3,2,0],[12,4,1,0],[12,17,0,2],[15,6,4,0],[15,7,0,3],[17,5,2,0]]),cz:[18,2],am:[18,8],iB:[new I(4,8,PI/2).D(1,4*PI/5,1),new I(13,17,3*PI/4).D(1,PI/2,1)._W(-.5)],iA:[new K(14,6).D(1,9,1),new K(4,10).D(1,15,1)]},{_C:W([[3,1,0,5],[3,7,0,6],[3,15,0,4],[5,3,0,2],[6,1,1,0],[6,4,6,0],[6,8,1,0],[6,11,1,0],[6,13,4,0],[6,14,3,0],[6,15,0,2],[7,3,1,0],[8,5,2,0],[8,6,2,0],[8,17,0,2],[9,7,0,2],[9,11,0,2],[11,2,0,2],[11,14,0,3],[12,3,2,0],[12,8,0,4],[14,12,2,0],[14,13,2,0],[14,16,3,0],[15,5,0,3],[16,6,0,2],[16,17,1,0],[18,1,0,3],[18,9,0,2]]),cz:[17,2],am:[2,2],iB:[new I(12,14.5,92*PI/128).D(1,PI/4,1.5),new I(4,10,PI/4).D(1,4*PI/5,1.5)],iA:[new K(14,5).D(1,7,1),new K(2,15).D(3,18,3)]},{_C:W([[1,1,4,0],[1,2,4,0],[1,12,9,0],[3,6,0,3],[6,7,1,0],[6,15,0,2],[7,4,0,2],[7,9,4,0],[7,10,1,0],[8,5,3,0],[9,13,1,0],[10,1,0,2],[10,6,0,3],[10,16,0,3],[11,7,8,0],[11,18,8,0],[13,2,0,4],[13,14,0,4],[14,16,5,0],[14,17,5,0],[16,1,0,2],[16,5,0,2],[16,12,0,4],[17,12,0,4],[18,12,0,4]]),cz:[18,1],am:[5,15.5],iB:[new I(14,3.5,3*PI/4).D(1.5,PI/4,1),new I(4,7,3*PI/4).D(1,PI/4,1)],iA:[new K(12,5).D(1,2,1),new K(15,15).D(2,12,0),new K(12,17).D(2,14,0)]},{_C:W([[2,11,0,5],[3,7,16,0],[3,11,2,0],[3,15,4,0],[4,1,0,4],[6,8,0,6],[7,13,2,0],[8,1,0,4],[8,14,0,4],[10,10,7,0],[10,15,4,0],[10,16,0,3],[12,1,0,4],[12,14,2,0],[16,1,0,4],[16,11,0,5]]),cz:[18,2],am:[18,9],iB:[new I(13,1,PI/3).D(1,2*PI/3,1),new I(9,1,2*PI/3).D(1,PI/3,1),new I(5,1,PI/3).D(1,2*PI/3,1),new I(3,12,PI/2).Y(4)._G(1,0).Y(1)._G(1,PI/2),new I(7,8,0).D(1,PI/2,1),new I(11,17,3*PI/4).Y(5)._G(1,PI/3).Y(1)._G(1,3*PI/4)],iA:[]},{_C:W([[2,3,3,0],[2,8,4,0],[3,4,0,2],[3,7,1,0],[4,9,0,5],[4,15,0,4],[5,15,1,0],[6,3,4,0],[6,4,1,0],[8,7,0,6],[8,14,2,0],[8,15,1,0],[9,7,1,0],[11,17,0,2],[12,9,2,0],[13,5,2,0],[13,6,1,0],[13,10,2,0],[13,14,2,0],[14,1,0,4],[14,11,0,3],[16,17,0,2],[17,9,2,0],[17,10,2,0]]),cz:[16,2],am:[3,11],aX:[10.5,'THIS IS IT'],iB:[new I(17,18,PI/2).D(1,8*PI/9,1),new I(5,9,PI/6).Y(4)._G(1,PI/2).Y(1)._G(1,PI/6)],iA:[new K(13,11).D(1,13,1),new K(3,13).D(1,9,1),new K(13,1).D(1,4,1)]}].map((t,i)=>new gz(i,t)),aG=800*_c.length+0-800;var cg=new gm,g_=function(t){cg.bv.gn(t);var i=cg.gl(),e=new Uint8Array(4*((i+1)/2|0)+44),h=2*cg.gk(new Uint16Array(e.buffer,44),i),s=new Uint32Array(e.buffer,0,44);s[0]=1179011410,s[1]=h+36,s[2]=1163280727,s[3]=544501094,s[4]=16,s[5]=65537,s[6]=44100,s[7]=88200,s[8]=1048578,s[9]=1635017060,s[10]=h,h+=44;for(var a=0,r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',n='data:audio/wav;base64,';a<h;a+=3){var _=e[a]<<16|e[a+1]<<8|e[a+2];n+=r[_>>18]+r[_>>12&63]+r[_>>6&63]+r[63&_]}var l=new Audio;return l.src=n,()=>l.play()};_O=(t=>{let i=Array(5).fill(0).map(()=>g_(t));return()=>{i.push(i.shift()),i[0]()}}),cq=_O([0,,.0759,.3764,.3201,.5109,,,,,,,,,,,,,1,,,,,.53]),gx=_O([0,,.0424,.4676,.4241,.4421,,,,,,.3703,.5339,,,,,,1,,,,,.53]),gt=_O([0,.05,.19,.41,.29,.12,,,,.2,1,,,,,,,,1,,,,,.53]),gv=_O([0,,.01,.3568,.432,.71,,,,,,.5058,.6842,,,,,,1,,,,,.53]),h$=_O([0,,.0119,,.29,.18,,.2838,,,,,,.4169,,,,,1,,,.191,,.53]),gQ=_O([3,,.06,,.24,.99,,.1979,,,,,,,,,,,1,,,,,.2]),g$=_O([3,.42,.01,,.48,.99,,-.04,-.04,,,-.04,,,,.6839,,,.27,-.02,,,,.53]),gw=_O([0,,.0759,.22,.36,.13,,,,.03,.23,-.06,,,,,,,1,,,,,.53]),M={},onkeydown=(t=>{M[t.keyCode]=1,75==t.keyCode&&(G.fZ(),cq()),84==t.keyCode&&G.bm&&fY(G.bm),27==t.keyCode&&G.aA&&G.az&&confirm('Exit?')&&G.dD()}),onkeyup=(t=>{M[t.keyCode]=0}),onblur=oncontextmenu=(()=>M={}),ontouchstart=ontouchmove=ontouchend=ontouchcancel=(t=>{M={},t.preventDefault();let i=_u.getBoundingClientRect();for(let e=0;e<t.touches.length;e++){let h=~~(1600*(t.touches[e].pageX-i.left)/i.width/400);M[37]=M[37]||0==h,M[39]=M[39]||1==h,M[32]=M[32]||ae(2,h,3)}}),dC=(()=>(navigator.getGamepads?Array.from(navigator.getGamepads()):[]).filter(t=>!!t)),bk=(t=>{let i=dC();for(var e=0;e<i.length;e++)try{if(i[e].buttons[t].pressed)return 1}catch(t){}}),dB=((t,i)=>{let e=dC();for(var h=0;h<e.length;h++)try{if(abs(i-e[h].axes[t])<.5)return 1}catch(t){}}),aN={et:()=>M[32]||M[38]||M[87]||M[90]||bk(0)||bk(1),left:()=>M[37]||M[65]||M[81]||bk(14)||dB(0,-1),eI:()=>M[39]||M[68]||bk(15)||dB(0,1)},ce={bf:'NORMAL',iz:1,iC:1},fV={bf:'EASY',iz:.8,iC:.7},fU={bf:'SUPER EASY',iz:.6,iC:.5},dA={bf:'NIGHTMARE',iz:1,iC:10},fT=(()=>{let t=[ce,fV,fU,dA];return document.monetization&&'started'===document.monetization.state&&t.push({bf:'PRACTICE',iz:1,iC:1,gK:1}),t});let cc={x:430,y:-15},dz=ac(120),dw=ac(24);class fS{constructor(){(G=this).H=0,G.af=0,G.az=0,G._p=ce,G.cb=0,G.dY=0,G.B=_c[0],G.B.bw(),G._b=[],G.bj=aG+800-400+100,G.du=1,G.fR=1,G.dt=1,G.fQ=1,G.fP=1,G.ca={x:cc.x,y:cc.y-10},G._i=Array(10).fill(0).map((t,i)=>({x:G.ca.x+7.5+5*i})),G.c_='NINJA',G.c$='VS',P(G,'fR',1,0,1,2),P(G,'fQ',-800,0,.3,.5,0,()=>{G.bZ=.1,R.font=dz,G.aK(measureText(G.c_).width/2,314,100)}),P(G,'fP',800,0,.3,1,0,()=>{G.bZ=.1,R.font=dw,G.aK(measureText(G.c$).width/2,324,5)})}aK(t,i,e){for(let h=0;h<e;h++)G._q({_f:[16],_J:'#fff',O:N(.4,.8),x:[800+N(-t,t),N(-40,40)],y:[i+N(-10,10),N(-15,15)]})}fZ(){G.aA&&(G.cb=1);let t=fT(),i=t.indexOf(G._p);G._p=t[(i+1)%t.length]}fN(){G.aA||(G.aA=1,G.af=0,G.cb=0,G.bm=0,G.B=_c[0],G.B.bw(),P(G,'dt',1,0,.5),G.dr(G.B._a,5,.5,()=>{P(G,'du',1,0,1,0,0,()=>{G.az=1,G.B.cr()})}),setTimeout(()=>{G._e=new cS('INFILTRATE THE TOWER','FIND THE EVIL PLANS'),G._e.eG=0,G._e.cP(),setTimeout(()=>G._e.cO(),3e3)},1e3),cq())}get dq(){try{return parseFloat(localStorage[G.dp])||0}catch(t){return 0}}get dp(){return location.pathname+G._p.bf}dD(){bb=[],P(G,'bj',G.bj,aG+800-400+100,2,.5,fh),P(G,'du',G.du,1,1,1),P(G,'dt',0,1,1,3),G.aA=0,G.az=0,G.af=0}gu(){G.aA=0,G.az=0,G.cb||(localStorage[G.dp]=min(G.dq||999999,G.af)),G.bm='I beat '+document.title+' in '+eU(G.af)+' on '+G._p.bf+' difficulty!',G.dD(),G.c_='YOU BEAT',G.c$='';let t=G._p==dA,i=G._p==ce||t,e=`OS13kTrophy,GG,${document.title},Beat the game - `,h='Find the evil plans';i&&(localStorage[e+'normal']=h),t&&(localStorage[e+'nightmare']=h),localStorage[e+'any']=h}_d(t){G.az&&(G.af+=t),G.H+=t,G.bZ-=t,aN.et()&&G.fN(),G.B._d(t),bb.slice().forEach(i=>i._d(t))}dr(t,i,e,h){P(G,'bj',G.bj,G.dl(t)-0,i,e,fh,h)}fw(){G.B.stop(),G.B=_c[G.B._a+1],G.B.bw(),G.dr(G.B._a,.5,0,()=>G.B.cr()),g$()}dl(t){return 800*t}__(){if(_(hs),fr(0,0,1600,800),J(()=>{_('#fff'),fn(1400,100,50)}),G.H%5<.3){G.H%.1<.05&&(_('rgba(255, 255, 255, 0.2)'),fr(0,0,1600,800)),R.strokeStyle='#fff',R.lineWidth=4;let t=1600*bM(G.H/5).cZ();beginPath();for(let i=0;i<=800;i+=40)t+=N(-40,40),lineTo(t,i);stroke()}eM.forEach((t,i)=>J(()=>{let e=.2+.8*i/(eM.length-1),h=G.bj/aG;_(t),translate(0,~~(800-t.height+h*e*400)),fr(0,0,1600,t.height)})),J(()=>{_('rgba(255,255,255,0.4)');let t=bM(1);for(let i=0;i<200;i++){let i=t.ae(-.2,1),e=t.cZ(),h=t.ae(1,2),s=14*PI/32+t.ae(-1,1)*PI/64,a=(e+G.H*h)%1.2,r=i+cos(s)*a,n=sin(s)*a;J(()=>{translate(1600*r,800*n),rotate(s),fr(0,0,-20,1)})}}),J(()=>{translate(400,800+~~G.bj+0),J(()=>{translate(0,-aG-800),J(()=>{R.globalAlpha=.5,drawImage(ao,0,0,ao.width,ao.height/2,0,-100,800,100)}),J(()=>{translate(160,0),_(hy),fr(0,0,480,-80)}),[30,90,150,210].forEach(t=>J(()=>{R.globalAlpha=.1*(.5*sin(G.H*PI*2/2)+.5)+.2,drawImage(bI,400+t-bI.width/2,-200),drawImage(bI,400-t-bI.width/2,-200)})),R.textAlign='center',R.textBaseline='alphabetic',_('#900'),R.strokeStyle='#f00',R.lineWidth=5,R.font=ac(96),bQ('EVILCORP',400,-30),J(()=>{G._i.forEach((t,i,e)=>{let h=i/e.length,s=15*h;t.y=G.ca.y-30*h+sin(20*-h+35*G.H)*s}),scale(1.5,1.5),ey(R,G.ca,G._i),translate(cc.x,cc.y),bE(R,G.H,eD,1,-1,0,0)})});let t=_c.indexOf(G.B);for(let i=max(0,t-1);i<min(_c.length,t+2);i++)J(()=>{translate(0,-G.dl(i)-800),_c[i].__()});R.globalAlpha=G.du,_(hz),J(()=>{fr(0,0,800,-aG-800)})}),G._e&&J(()=>G._e.__()),J(()=>{if(G.H%2<1.5&&1==G.dt){let t=['PRESS [SPACE] TO START',df.toUpperCase()];G.bm&&t.unshift('PRESS [T] TO TWEET YOUR TIME'),t.forEach((t,i)=>{R.textAlign='center',R.textBaseline='middle',R.font=font(24),_('#fff'),R.strokeStyle='#000',R.lineWidth=2,bQ(t,800,640+50*i)})}}),_('#000'),fr(0,800,1600,200),_('#fff'),J(()=>{R.globalAlpha=.5+.5*!!M[37],translate(200,900),scale(-1,1),eO()}),J(()=>{R.globalAlpha=.5+.5*!!M[39],translate(600,900),eO()}),J(()=>{R.globalAlpha=.5+.5*!!M[32],fn(1200,900,50)});let t=[['DIFFICULTY:',G._p.bf]];G.af&&(t.push(['LEVEL:',G.B._a+1+'/'+_c.length]),t.push(['TIME'+(G.cb?' (INVALIDATED):':':'),eU(G.af)])),t.push(['BEST ['+G._p.bf+']:',eU(G.dq)]),t.forEach(([t,i],e)=>J(()=>{R.textAlign='left',R.textBaseline='middle',_('#fff'),R.font=ac(18),bc(t,20,30+90*e),R.font=font(36),bc(i,20,70+90*e)})),R.textAlign='right',R.textBaseline='alphabetic',R.font='18pt Courier',_('#888'),fillText('Gamepad: '+(dC().length?'yes':'no'),1580,780),J(()=>{R.globalAlpha=G.fR,_('#000'),fr(0,0,1600,800)}),J(()=>{G.bZ>0&&translate(N(-10,10),N(-10,10)),R.globalAlpha=G.dt,R.textAlign='center',R.textBaseline='middle',_('#fff'),R.strokeStyle='#000',R.lineWidth=5,R.font=dz,bQ(G.c_,800,264+G.fQ),R.font=dw,R.lineWidth=2,bQ(G.c$,800,344+G.fP)}),G._b.forEach(t=>J(()=>t.__()))}_q(t){let i;t.cT=(()=>bN(G._b,i)),G._b.push(i=new eH(t))}}fY=(t=>{open('//twitter.com/intent/tweet?hashtags=js13k&url='+location+'&text='+encodeURIComponent(t))}),onload=(()=>{_u.width=1600,_u.height=800,navigator.userAgent.match(/andro|ipho|ipa|ipo/i)&&(_u.height+=200),onresize(),R=_u.getContext('2d'),Object.getOwnPropertyNames(_A).forEach(t=>{R[t].call&&(w[t]=_A[t].bind(R))}),new fS;let t=0;loop((i,e)=>{G._d(i),t=1},t=>setTimeout(t,5)),loop((i,e)=>{t&&J(()=>G.__())},t=>requestAnimationFrame(t))});</script>");  
}

void spartan() {
  //server.send(200, "text/html","<html><head><meta http-equiv='Content-Type' content='text/html; charset=UTF-8'><meta name='viewport' content='width=device-width,initial-scale=1'><style type='text/css'>*{box-sizing:border-box;user-select:none}body,html{width:100%;height:100%;margin:0;padding:0}html{background-image:url('data:image/svg+xml;charset=utf-8,%3Csvg width='64' height='128' viewBox='0 0 32 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 28h20V16h-4v8H4V4h28v28h-4V8H8v12h4v-8h12v20H0v-4zm12 8h20v4H16v24H0v-4h12V36zm16 12h-4v12h8v4H20V44h12v12h-4v-8zM0 36h8v20H0v-4h4V40H0v-4z' fill='%23d8b685' fill-rule='evenodd'/%3E%3C/svg%3E');background-color:#e0ddd5}body{padding-top:40px}#w{width:768px;margin:0 auto;position:relative;font-family:Herculanum;box-shadow:0 8px 8px 3px rgba(0,0,0,.5)}#w1{position:relative}#c,#w1{width:100%;height:432px}#c{transform:translateZ(0)}#c,#gg,#pz,#tt{position:absolute}#gg,#pz,#tt{width:100%;height:100%;padding:24px}#gg,#pz{display:none;background:rgb(0 0 0/80%);align-items:center;justify-content:center;text-align:center;color:#fff}#tt{text-align:right;display:flex;flex-direction:column;color:#fff}#t{font-size:80px;line-height:60px;flex-grow:1}#t2{font-size:32px}#t3{text-align:right;font-size:18px;margin-bottom:24px}#pz,#rty,#t4{font-size:32px;font-style:italic}#g{font-size:72px;color:#fff;margin:0}#i{font-family:monospace;background:#e0ddd5;color:#703529;font-weight:700;font-size:18px;padding:12px}#i>div{justify-content:space-evenly}#i>div,.m{display:flex}.m{justify-content:space-between;font-size:32px}#kr,#sr,.m{font-family:monospace}#kr,#sr{text-align:right;margin-bottom:16px}#z{font-size:12px;position:absolute;left:6px;bottom:6px}</style></head><body><div id='w'><div id='w1'><canvas id='c' width='768' height='432'></canvas><div id='pz' style='display: flex;'><div>[P] to Resume</div></div><div id='gg' style='display: flex;'><div><h1 id='g'>YOU DIED</h1><div>An honorable death.</div><br><br><div class='m'><div>Kills</div><div id='k'>6</div></div><div id='kr'>Record: 0</div><div class='m'><div>Survived</div><div id='s'>66s</div></div><div id='sr'>Record: 0s</div><div id='rty'>[Enter] to Retry</div></div></div><div id='tt' style='display: none;'><div id='t'>The Last<br>Spartan<div id='t2'>404 B.C.</div></div><div id='t3'>No retreat.<br>No surrender.<br>No way out alive.<br><br>Go down swinging.</div><div id='t4'>[Enter] to Start</div><div id='z'>by @ferronsays</div></div></div><div id='i'><div><div>Move : WASD</div><div>Attack : J</div><div>Block : K</div><div>Jump : SPACE</div><div>Pause : P</div></div><div><div>Spartan Charge : K + J</div><div>Ground Pound : SPACE + J</div></div></div></div><script type='text/javascript'>(t=>{var s={};function i(h){if(s[h])return s[h].exports;var e=s[h]={i:h,l:!1,exports:{}};return t[h].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=t,i.c=s,i.d=(t,s,h)=>{i.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:h})},i.r=t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'u',{value:!0})},i.t=(t,s)=>{if(1&s&&(t=i(t)),8&s)return t;if(4&s&&'object'==typeof t&&t&&t.u)return t;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,'default',{enumerable:!0,value:t}),2&s&&'string'!=typeof t)for(var e in t)i.d(h,e,(s=>t[s]).bind(null,e));return h},i.n=t=>{var s=t&&t.u?()=>t.default:()=>t;return i.d(s,'a',s),s},i.o=(t,s)=>({}.hasOwnProperty.call(t,s)),i.p='',i(i.s=3)})([function(t,s,i){window,t.exports=function(t){var s={};function i(t,s,i){this.x=t,this.y=s,this.z=i}i.prototype._=function(t,s,i){return this.x*t+this.y*s+this.z*i};var h=[new i(1,1,0),new i(-1,1,0),new i(1,-1,0),new i(-1,-1,0),new i(1,0,1),new i(-1,0,1),new i(1,0,-1),new i(-1,0,-1),new i(0,1,1),new i(0,-1,1),new i(0,1,-1),new i(0,-1,-1)],e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],r=Array(512),a=Array(512);s.v=t=>{t|=t<<8;for(var s=0;256>s;s++){var i;i=1&s?e[s]^255&t:e[s]^t>>8&255,r[s]=r[s+256]=i,a[s]=a[s+256]=h[i%12]}},s.v(0);var n=1/6;return s.M=(t,s,i)=>{var h,e,o,c,f,u,p=.3333333333333333*(t+s+i),d=Math.floor(t+p),w=Math.floor(s+p),_=Math.floor(i+p),l=(d+w+_)*n,v=t-d+l,M=s-w+l,m=i-_+l;M>v?m>M?(h=0,e=0,o=1,c=0,f=1,u=1):m>v?(h=0,e=1,o=0,c=0,f=1,u=1):(h=0,e=1,o=0,c=1,f=1,u=0):m>M?m>v?(h=0,e=0,o=1,c=1,f=0,u=1):(h=1,e=0,o=0,c=1,f=0,u=1):(h=1,e=0,o=0,c=1,f=1,u=0);var b=v-h+n,g=M-e+n,x=m-o+n,y=v-c+2*n,k=M-f+2*n,S=m-u+2*n,A=v-1+.5,T=M-1+.5,O=m-1+.5,z=a[(d&=255)+r[(w&=255)+r[_&=255]]],V=a[d+h+r[w+e+r[_+o]]],j=a[d+c+r[w+f+r[_+u]]],L=a[d+1+r[w+1+r[_+1]]],P=.6-v*v-M*M-m*m,C=.6-b*b-g*g-x*x,R=.6-y*y-k*k-S*S,K=.6-A*A-T*T-O*O;return 32*((0>P?0:(P*=P)*P*z._(v,M,m))+(0>C?0:(C*=C)*C*V._(b,g,x))+(0>R?0:(R*=R)*R*j._(y,k,S))+(0>K?0:(K*=K)*K*L._(A,T,O)))},s}()},function(t,s){var i=CanvasRenderingContext2D.prototype;i.s=i.save,i.r=i.restore,i.g=i.fillRect,i.k=i.lineTo,i.S=i.translate,i.A=i.beginPath,i.T=function(t){this.fillStyle=t}},(t,s,i)=>{},function(t,s,i){i.r(s);class h{constructor(t=0,s=0){this.x=t,this.y=s}static O(t,s){return new h(t.x+s.x,t.y+s.y)}static V(t,s){return new h(t.x-s.x,t.y-s.y)}static j(t,s){return s instanceof h?new h(t.x*s.x,t.y*s.y):new h(t.x*s,t.y*s)}static L(t,s){return Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))}static P(t){return new h(Math.cos(t),Math.sin(t))}static C(t,s){return new h(t.x*Math.cos(s)-t.y*Math.sin(s),t.x*Math.sin(s)+t.y*Math.cos(s))}R(){return new h(this.x,this.y)}K(){return Math.sqrt(this.x*this.x+this.y*this.y)}D(){var t=this.K();return t>0?this.j(1/t):this}F(t){return this.K()>t?(this.D(),this.j(t)):this}O(t){return this.x+=t.x,this.y+=t.y,this}V(t){return this.x-=t.x,this.y-=t.y,this}j(t){return this.x*=t,this.y*=t,this}B(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}J(){return this.x=0,this.y=0,this}}var e=h,r=768,a=432,n=new e(60,30),o=t=>{var s=new e(0,0);return s.x=(t.x-t.y)*n.x/2,s.y=(t.x+t.y)*n.y/2,s},c=t=>{var s=new e;return s.x=t.x/n.x+t.y/n.y,s.y=t.y/n.y-t.x/n.x,s},f=()=>2*Math.random()-1,u=(t,s)=>~~(Math.random()*(s-t+1)+t),p=(t,s,i)=>t>=s&&i>=t,d=t=>1>=t,w=t=>null!=t;class _{constructor(t,s,i,h){this.W=t||0,this.q=s||0,this.N=i||0,this.I=h||0,this.Y=this.W+this.N,this.Z=this.q+this.I}set(t,s,i,h){this.W=t,this.q=s,this.N=i||this.N,this.I=h||this.I,this.Y=this.W+this.N,this.Z=this.q+this.I}}class l{constructor(t,s){this.L=80,this.$=576,this.G=new e,this.H=Math.PI/4,this.U=new _(0,0,0,0),this.X=new e(1,1),this.tt=!0,this.st=.15,this.it=0,this.ht(),this.et=t,this.rt=s,this.at=t/s}nt(t){t.s(),this.j(t),this.S(t)}ot(t){t.r()}j(t){t.scale(this.X.x,this.X.y)}S(t){t.S(-this.U.W,-this.U.q)}ct(t){this.it=Math.max(this.it-t,0),this.ft(this.L+.05*(this.$-this.L))}ht(){this.U.set(this.G.x-this.U.N/2+(this.it?6*f():0),this.G.y-this.U.I/2+(this.it?6*f():0),this.L*Math.tan(this.H),this.U.N/this.at),this.X.x=this.et/this.U.N,this.X.y=this.rt/this.U.I}ft(t){this.L=t,this.ht()}ut(t,s){var i=new e(t,s);this.tt?this.G.V(e.V(this.G,i).j(this.st)):this.G=i.R(),this.ht()}}var v=class{constructor(){this.pt=[],this.dt=new e,this.wt=0,this._t=0,this.lt=0,this.vt=!0,this.Mt=Math.floor(9999*Math.random())}bt(){for(var t=this.dt.R(),s=this.gt;s;)(t=e.C(t,s._t)).O(s.dt),s=s.gt;return t}xt(){for(var t=this._t,s=this.gt;s;)t+=s._t,s=s.gt;return t}yt(){for(var t=this.wt,s=this.gt;s;)t+=s.wt,s=s.gt;return t}kt(t){t.gt=this,this.pt.push(t)}ct(t){this._t+=this.lt;for(var s=this.pt.length;s--;){var i=this.pt[s];i.ct(t),i.vt||this.pt.splice(s,1)}}St(t){var s=this.pt.length;if(0!==s){for(t.s(),t.S(this.dt.x,this.dt.y-this.wt),t.rotate(this._t);s--;)this.pt[s].St(t);t.r()}}},M=class{constructor(t){this.At=t,this.Tt={}}},m=class extends M{constructor(t,s=6,i=1,h=Math.PI/4){super(t),this.Tt={Ot:s,zt:i,Vt:h},this.jt=t._t}Lt(t){var s=this.At.Pt.R();s.D(),s.j(this.Tt.Ot);var i=new e(0,-1);i.j(t||this.Tt.zt);var h=i.K();return i.x=Math.cos(this.jt)*h,i.y=Math.sin(this.jt)*h,this.jt+=Math.random()*this.Tt.Vt-.5*this.Tt.Vt,e.O(s,i)}},b=class extends M{constructor(t){super(t),this.Tt={zt:2}}Lt(t,s){return e.V(t.dt,this.At.dt).D().j(s||this.Tt.zt)}},g=class extends b{constructor(t){super(t),this.Tt={zt:2}}Lt(t,s){return super.Lt(t,s).j(-1)}},x=class extends M{constructor(t){super(t),this.Tt={Ct:5,Rt:.75,Kt:75,Dt:300,zt:1}}Lt(t){return this.Ft(mt.Jt.Et.Bt).D().j(t||this.Tt.zt)}Ft(t){var s=this.Wt(t).j(this.Tt.Ct),i=this.qt(t).j(this.Tt.Rt);return s.O(i)}qt(t){var s=new e(0,0),i=0;t.forEach(t=>{var h=e.L(this.At.dt,t.dt);h>0&&h<this.Tt.Dt&&(s.O(t.dt),i++)}),i>0&&s.j(1/i);var h=e.V(s,this.At.dt),r=h.K();return 100>r&&h.j(r/100),h.D().F(.05)}Wt(t){var s=new e,i=0;return t.forEach(t=>{var h=e.L(this.At.dt,t.dt);h>0&&h<this.Tt.Kt&&(s.O(e.V(this.At.dt,t.dt).D().j(1/h)),i++)}),i>0&&s.j(1/i),s}},y=class extends v{constructor(t=new e){super(),this.Pt=new e,this.Nt=new e,this.It=0,this.Yt=.098,this.Zt=10,this.$t=100,this.Gt=1,this.Ht=1/0,this.Qt=-1,this.Ut=0,this.Xt=100,this.ts=0,this.ss=!0,this.hs=1,this.dt=t,this.es=new class{constructor(t){this.rs=new e,this.At=t,this.as=new m(t),this.ns=new b(t),this.os=new g(t),this.cs=new x(t)}fs(t){this.rs.O(this.as.Lt(t))}us(t,s){this.rs.O(this.ns.Lt(t,s))}ps(t,s){this.rs.O(this.os.Lt(t,s))}Ft(t){this.rs.O(this.cs.Lt(t))}}(this)}get ds(){return this.ts+this.wt}kt(t){t.gt=this,this.pt.push(t)}ws(){this.vt=!1,this._s&&this._s.ws(),this.gt=void 0}ct(t){if(this.vt)if(this.Ut+=t,0>=this.ls||this.Qt&&-1!==this.Qt&&this.Ut>=this.Qt)this.ws();else{var s=this.dt.R();this.Nt.O(this.es.rs.F(this.Gt)),this.Pt.O(this.Nt).F(this.$t*(t/1e3)),this.dt.O(this.Pt),this.Nt.J(),this.es.rs.J(),this.It-=this.Yt,this.wt=Math.max(0,this.wt+this.It),0===this.wt&&(this.It=0,this.lt=0),this.ss&&this.vs(s),this.Ms(),super.ct(t)}}ms(t){return mt.Jt.bs&&0!==mt.Jt.bs.gs.length&&60>t.x&&t.x>=0&&60>t.y&&t.y>=0?mt.Jt.bs.gs[t.y][t.x]:null}xs(){return e.L(this.dt,mt.Jt.ys.dt)}vs(t){var s=c(t),i=c(this.dt),h=this.ms(i.R().B());if(!h||!w(h.ks)){var r=s.R(),a=e.V(i,s),n=a.R();n.y=0;var f=this.ms(e.O(s,n).B());f&&w(f.ks)&&r.O(n);var u=a.R();u.x=0,(f=this.ms(e.O(s,u).B()))&&w(f.ks)&&r.O(u),this.dt=o(r)}}Ms(){var t=c(this.bt()).B(),s=this.ms(t);if(s){var i=s.I-this.ts;0>i&&w(s)&&(this.wt+=this.ts-s.I),this.ts=s.I,this.Ss=s.ks,this.As=s,i>0&&(this.wt=Math.max(0,this.wt-i))}}};class k extends v{Ts(t){return this.pt.filter(s=>this.Os(t,s))}Os(t,s){if(t!==s&&t.zs.Mt!==s.zs.Mt)return this.Vs(t,s)}Vs(t,s){return t.p.x<s.p.x+s.w&&t.p.x+t.w>s.p.x&&t.p.y<s.p.y+s.h&&t.p.y+t.h>s.p.y}}class S extends y{constructor(t,s,i,h,r=-1,a=!1){super(),this.w=i,this.h=h,this.zs=t,this.js=s||new e,this.ct(0),this.Qt=r,a&&mt.Jt.Ls.kt(this)}ct(t){super.ct(t),this.p=this.zs.dt.R().O(this.js).O(new e(0,-this.zs.wt))}}class A extends y{constructor(){super(),this.Ls=new k,this.Ps=new l(r,a),this.Ps.G=o(new e(5,5))}ct(t){this.Ps.ct(t),this.Ls.ct(t),super.ct(t)}Cs(t){this.kt(t)}Rs(t){return p(t.x,this.Ps.U.W-100,this.Ps.U.Y+100)&&p(t.y,this.Ps.U.q-100,this.Ps.U.Z+100)}}var T,O,z,V=new class{constructor(){var t=t=>s=>{switch(1===s.which?this.Ks=t:3===s.which&&(s.preventDefault(),this.Ds=t),s.code){case'KeyD':this.Fs=t;break;case'KeyS':this.Bs=t;break;case'KeyA':this.Es=t;break;case'KeyW':this.Js=t;break;case'Space':this.Ws=t;break;case'KeyJ':this.Ks=t;break;case'KeyK':this.Ds=t}};window.addEventListener('keydown',t(!0)),window.addEventListener('keyup',t(!1)),window.addEventListener('mousedown',t(!0)),window.addEventListener('mouseup',t(!1))}},j=class{constructor(t,s,i=!0){this.qs=0,this.Ns=[],this.Is=t,this.Ys=i,['body','head','sword','shield','legL','legR'].forEach(i=>{for(var h=s[i]||[{f:0},{f:t}],r=1;r<h.length;r++)for(var a=h[r-1],n=h[r],o=n.f-a.f,c=0;o>c;c++){var f=c/o,u=this.Ns[a.f+c],p=u||{},d={};if(a.hasOwnProperty('p')){var w=a.p[0]+(n.p[0]-a.p[0])*f,_=a.p[1]+(n.p[1]-a.p[1])*f;d.dt=new e(w,_)}else d.dt=new e(0,0);if(a.hasOwnProperty('r')){var l=a.r+(n.r-a.r)*f;d.r=l}else d.r=0;p[i]=d,u||this.Ns.push(p)}})}get Zs(){return this.Ns[this.qs]}get $s(){return!this.Ys&&this.qs===this.Is-1}ct(){this.qs+=1,this.qs>this.Is-1&&(this.qs=0)}},L=class extends y{constructor(t,s){super(t),this.Gs=!1,this.Hs=s,this.ss=!1}ct(t){0===this.wt&&(this.Pt.J(),this.Gs=!1);var s=this.Qt-this.Ut;-1!==this.Qt&&s<.1*this.Qt&&(this.hs=s/(.1*this.Qt)),super.ct(t)}Qs(t){t.T('rgba(0,0,0,0.5'),t.g(.4*-this.Hs.x,this.wt,.8*this.Hs.x,this.Hs.y/2)}},P=class extends y{constructor(t,s,i,h,e,r,a,n){super(t),this.wt=s,this.It=i,this.Pt=h,this.Hs=e,this.Us=r,this.Qt=a,this.Xs=n,this.Ms()}ct(t){super.ct(t),this.Hs+=this.Us*t}St(t){t.T('rgba(0,0,0,0.5'),t.g(this.dt.x-this.Hs/4,this.dt.y+this.Hs/4-this.ts,this.Hs/2,this.Hs/2),t.T(this.Xs),t.g(this.dt.x-this.Hs/2,this.dt.y-this.Hs/2-this.ds,this.Hs,this.Hs),super.St(t)}},C=class extends y{constructor(){super(...arguments),this.ti=new e,this.si=0,this.It=0,this.ii=0,this.hi=0,this.ei=0,this.Zt=0,this.ri=0,this.Hs=0,this.ai=0,this.ni=0,this.oi=0,this.ci=0,this.fi=0,this.Xs='#fff',this.ui=0,this.pi=0,this.di=-1,this.wi=!1,this._i=[]}ct(t){if(0===this.di)for(;this._i.length<this.ei;)this.emit();super.ct(t),this._i=this._i.filter(t=>t.vt);var s=this.ei/this.ci;if(this.vt&&s>0){var i=1/s;for(this.ui+=t;this._i.length<this.ei&&this.ui>i;)this.emit(),this.ui-=i;this.pi+=t,-1!==this.di&&this.di<this.pi&&this.ws()}}emit(){var t=this.ti.R().j(f());this.wi&&(t=e.C(t,this.xt()));var s=this.wi?this.bt():this.dt.R();s.x+=t.x,s.y+=t.y;var i=(this.wi?this.xt():this._t)+this.hi*f(),h=this.Zt+this.ri*f(),r=new e(Math.cos(i),Math.sin(i)).j(h),a=this.Hs+this.ai*f();a=0>a?0:~~a;var n=this.ni+this.oi*f();n=0>n?0:~~n;var o=this.It+this.ii*f();o=0>o?0:~~o;var c=this.ci+this.fi*f(),u=(n-a)/c,p=new P(s,this.si,o,r,a,u,c,this.Xs);void 0!==this.Yt&&(p.Yt=this.Yt),this.wi?(p.wt=this.yt(),mt.Jt.Cs(p)):this.kt(p),this._i.push(p)}},R=class extends L{constructor(t,s,i){super(t,s),this.li=i}vi(){var t=new C;Object.assign(t,{dt:new e(0,this.Hs.y/2),_t:Math.PI/2,wi:!0,Xs:'#db0000',ei:24,Hs:12,ci:2600,fi:800,Zt:.2,ri:.1,hi:.5,di:3200}),this.kt(t)}St(t,s={dt:new e,r:0},i){super.St(t),t.s(),t.S(this.dt.x+s.dt.x,this.dt.y+s.dt.y-this.ds),this.Gs&&this.Qs(t),t.rotate(s.r+this._t),this.li&&(t.T(i||'#900'),t.g(.7*-this.Hs.x,.7*-this.Hs.y,.8*this.Hs.x,this.Hs.y)),t.T(i||'#fbca03'),t.g(-this.Hs.x/2,-this.Hs.y/2,this.Hs.x,this.Hs.y),t.A(),t.strokeStyle=i||'#222',t.lineWidth=2,t.moveTo(0,0),t.k(this.Hs.x/2,0),t.stroke(),t.moveTo(this.Hs.x/3,0),t.k(this.Hs.x/3,this.Hs.y/2),t.stroke(),t.r()}},K=class extends L{St(t,s={dt:new e,r:0},i,h=!1){t.s(),t.lineWidth=1,t.globalAlpha=this.hs,t.S(this.dt.x+s.dt.x,this.dt.y+s.dt.y-this.ds-(h?6:0)),this.Gs&&this.Qs(t),t.rotate(s.r+this._t),t.T(i||'#963'),t.g(-6,-1,6,2),t.lineWidth=2,t.T(i||'#d8d8d8'),t.g(0,-2,this.Hs.x-6,this.Hs.y),t.r()}};T=(t=1,s=.05,i=220,h=0,e=0,r=.1,a=0,n=1,o=0,c=0,f=0,u=0,p=0,d=0,w=0,_=0,l=0,v=1,M=0,m=0)=>{var b,g,x=2*Math.PI,y=o*=500*x/z**2,k=(w>0?1:-1)*x/4,S=i*=(1+2*s*Math.random()-s)*x/z,A=[],T=0,V=0,j=0,L=1,P=0,C=0,R=0;for(c*=500*x/z**3,w*=x/z,f*=x/z,u*=z,p=z*p|0,g=(h=99+z*h)+(M*=z)+(e*=z)+(r*=z)+(l*=z)|0;g>j;A[j++]=R)++C%(100*_|0)||(R=a?a>1?a>2?a>3?Math.sin((T%x)**3):Math.max(Math.min(Math.tan(T),1),-1):1-(2*T/x%2+2)%2:1-4*Math.abs(Math.round(T/x)-T/x):Math.sin(T),R=(p?1-m+m*Math.sin(2*Math.PI*j/p):1)*(R>0?1:-1)*Math.abs(R)**n*t*.3*(h>j?j/h:h+M>j?1-(j-h)/M*(1-v):h+M+e>j?v:g-l>j?(g-j-l)/r*v:0),R=l?R/2+(l>j?0:(g-l>j?1:(g-j)/l)*A[j-l|0]/2):R),T+=(b=(i+=o+=c)*Math.sin(V*w-k))-b*d*(1-1e9*(Math.sin(j)+1)%2),V+=b-b*d*(1-1e9*(Math.sin(j)**2+1)%2),L&&++L>u&&(i+=f,S+=f,L=0),!p||++P%p||(i=S,o=y,L=L||1);return(t=O.createBuffer(1,g,z)).getChannelData(0).set(A),(i=O.createBufferSource()).buffer=t,i.connect(O.destination),i.start(),i},O=new(window.AudioContext||webkitAudioContext),z=44100;var D,F,B=T,E=(D=B,(...t)=>{var s=!F;clearTimeout(F),F=setTimeout(()=>{F=null},48),s&&D.apply(void 0,t)}),J=(t,s=!1)=>s?E(...t):B(...t),W={body:[{f:0,p:[0,0]},{f:10,p:[0,-1]},{f:20,p:[0,0]}],head:[{f:0,p:[0,0]},{f:5,p:[0,1]},{f:20,p:[0,0]}],sword:[{f:0,r:0},{f:10,r:-.045},{f:20,r:0}],shield:[{f:0,r:.14,p:[0,2.5]},{f:10,r:.16,p:[.5,3]},{f:20,r:.14,p:[0,2.5]}]},q={body:[{f:0,r:.1,p:[0,4]},{f:10,r:.1,p:[0,3.5]},{f:20,r:.1,p:[0,4]}],head:[{f:0,p:[0,5]},{f:5,p:[0,4.5]},{f:20,p:[0,5]}],sword:[{f:0,r:.25,p:[-6,2]},{f:10,r:.25,p:[-6,1.5]},{f:20,r:.25,p:[-6,2]}],shield:[{f:0,p:[8,1.5]},{f:0,p:[8.25,1.75]},{f:20,p:[8,1.5]}]},N={body:[{f:0,r:.2,p:[0,2]},{f:3,r:.2,p:[0,3]},{f:7,r:.2,p:[0,2]},{f:13,r:.2,p:[0,3]},{f:20,r:.2,p:[0,2]}],head:[{f:0,r:-.1,p:[1,4]},{f:3,r:-.1,p:[1,5]},{f:7,r:-.1,p:[1,4]},{f:13,r:-.1,p:[1,5]},{f:20,r:-.1,p:[1,4]}],sword:[{f:0,r:.2,p:[-3,1]},{f:10,r:.25,p:[-6,1]},{f:20,r:.2,p:[-3,1]}],shield:[{f:0,p:[13.5,-1.75]},{f:10,p:[14,-2]},{f:20,p:[13.5,-1.75]}],legL:[{f:0,r:1},{f:10,r:-1},{f:20,r:1}],legR:[{f:0,r:-1},{f:10,r:1},{f:20,r:-1}]},I={body:[{f:0,r:.1,p:[0,0]},{f:3,r:.1,p:[0,2]},{f:7,r:.1,p:[0,0]},{f:13,r:.1,p:[0,2]},{f:20,r:.1,p:[0,0]}],head:[{f:0,r:-.1,p:[0,0]},{f:3,r:-.1,p:[0,2]},{f:7,r:-.1,p:[0,0]},{f:13,r:-.1,p:[0,2]},{f:20,r:-.1,p:[0,0]}],sword:[{f:0,r:-.24,p:[3,-4]},{f:10,r:-.2,p:[0,-4]},{f:20,r:-.24,p:[3,-4]}],shield:[{f:0,r:.24,p:[0,0]},{f:10,r:.2,p:[3,0]},{f:20,r:.24,p:[0,0]}],legL:[{f:0,r:1.4},{f:10,r:-1.4},{f:20,r:1.4}],legR:[{f:0,r:-1.4},{f:10,r:1.4},{f:20,r:-1.4}]},Y={body:[{f:0,r:.1},{f:16,r:.1}],sword:[{f:0,r:-1.5,p:[0,-8]},{f:2,r:-1.5,p:[0,-8]},{f:8,r:0,p:[18,-4]},{f:12,r:.25,p:[12,-4]},{f:16,r:0,p:[0,-4]}],shield:[{f:0,p:[0,0]},{f:16,p:[-8,0]}],legL:[{f:0,r:0},{f:8,r:1},{f:16,r:0}],legR:[{f:0,r:0},{f:8,r:-1},{f:16,r:0}]},Z=Object.assign(Object.assign({},Y),{body:[{f:0,r:.3,p:[0,2]},{f:16,r:.3,p:[0,2]}],head:[{f:0,r:-.1,p:[1,4]},{f:16,r:-.1,p:[1,4]}],sword:[{f:0,r:.2,p:[0,0]},{f:16,r:.2,p:[-8,0]}],shield:[{f:0,p:[14,0]},{f:4,p:[24,0]},{f:10,p:[24,0]},{f:16,p:[14,0]}]}),$={body:[{f:0,r:-.1,p:[0,0]},{f:6,r:-.1,p:[0,0]},{f:24,r:.5,p:[0,5]},{f:36,r:.5,p:[0,5]}],head:[{f:0,r:-.1,p:[0,0]},{f:6,r:-.1,p:[0,0]},{f:24,r:-.3,p:[0,5]},{f:36,r:-.3,p:[0,5]}],sword:[{f:0,r:-Math.PI/2,p:[0,-10]},{f:6,r:-Math.PI/2,p:[0,-10]},{f:20,r:-Math.PI/2,p:[10,10]},{f:36,r:-Math.PI/2,p:[10,10]}],shield:[{f:0,r:-.1,p:[10,-10]},{f:6,r:-.1,p:[10,-10]},{f:20,r:0,p:[16,12]},{f:36,r:0,p:[16,12]}],legL:[{f:0,r:1},{f:6,r:1.2},{f:24,r:.5},{f:36,r:.5}],legR:[{f:0,r:-1},{f:6,r:-1.2},{f:24,r:0},{f:36,r:0}]},G=(t,s)=>{t=t.substr(1);var i=parseInt(t,16),h=Math.round(2.55*s),e=(i>>16)+h,r=(i>>8&255)+h,a=(255&i)+h;return'#'+(16777216+65536*(255>e?1>e?0:e:255)+256*(255>r?1>r?0:r:255)+(255>a?1>a?0:a:255)).toString(16).slice(1)},H=class extends y{constructor(t,s,i=0,h,r){super(),this.Mi=h,this.ks=r,this.mi=new e(t,s),this.dt=o(this.mi),this.I=this.bi=i}St(t){if(mt.Jt.Rs(this.dt)){var s=~~this.I;t.drawImage(this.Mi,Math.floor(this.ks*(n.x+1)),Math.floor(n.y*s+s*(s+1)/2-s),Math.floor(n.x),Math.floor(n.y+s),Math.floor(this.dt.x-n.x/2),Math.floor(this.dt.y-s),Math.floor(n.x),Math.floor(n.y+s))}super.St(t)}},Q=class extends y{constructor(t){super(t),this.gi=new e(16,18),this.xi=new e(12,18),this.yi=new e(40,4),this.ki=new e(20,20),this.Si=new e(4,8),this.Ai=100,this.Ti=0,this.Oi=350,this.zi=0,this.Vi=0,this.ji=0,this.Li=!1,this._s=new S(this,new e(-9,-35),18,45,-1,!0),this.Pi=500,this.Ci=0,this.Ri=500,this.Ki=0,this.Di=0,this.Fi=0,this.Zt=200,this.$t=200,this.Yt=.3,this.Bi=new j(20,W),this.Ei=new j(20,q),this.Ji=new j(20,N),this.Wi=new j(20,I),this.qi=new j(16,Y,!1),this.Ni=this.Bi,this.Ii=!0,this.Yi(),this.Ms()}Yi(){this.Zi=new R(new e(0,-this.xi.y-this.gi.y/2*.8),this.gi,!1),this.$i=new K(new e(-4,-this.xi.y/2+4),this.yi),this.Zi.gt=this.$i.gt=this}Gi(){if(0>=this.zi&&this.vt&&0!=~~this.Ai){this.Hi(5,600),J([.1,1,1123,.15,,.03,4,.69,,-84.1,,.01,,.8,-4,-.1,,.32,.04,.01]),this.Ni=this.qi,this.qi.qs=0;var t=this.Ii?1:-1;mt.Jt.Ls.Ts(new S(this,new e(t*(this.xi.x/2+10+(this.Ii?0:36)),-30),36,20)).forEach(t=>{t.zs.Qi(this)}),this.zi=this.Oi}}Ui(t,s,i,h){t.Ms(),t.wt=s,t.It=i,t.Pt=e.P(Math.random()*Math.PI),t.lt=f()/h,t.Gs=!0}ws(){this._s.vt=!1;var t=new R(this.dt.R(),this.gi,!1);t.vi(),t.Qt=3e5;var s=new K(this.dt.R(),this.yi);s.Qt=3e4,this.Ui(s,40,u(.5,1.5),4),this.Ui(t,40,u(1,4),5),mt.Jt.Cs(t),mt.Jt.Cs(s),super.ws()}Qi(t,s,i=!1){var h=e.V(this.dt,t.dt).D().x;t instanceof it&&(mt.Jt.Ps.it=50);var r=s||i?t.Xi/3:t.Xi,a=!s&&!i;this.Li&&this.Ai>0&&(0>h&&this.Ii||h>0&&!this.Ii)&&(r=0,a=!1,this.Hi(1.5*t.Xi,1e3)),this.Nt.x+=this.Li?0:10*h,this.It+=i?5:3,this.ls=Math.max(0,this.ls-r),0===this.ls&&(t.Fi+=1),this.Vi=200,this.ji+=s?2e3:i?1200:0,J(r?[,1,287,,,.03,2,1.88,-6.4,-27,,,,,,,,.39,.04,.39]:[,,456,,,.14,,1.76,,6.5,,,,1.8,-.6,.3,.11,.53,.05,.23]);var n=new C;Object.assign(n,{dt:new e(0,-this.xi.y/2),wi:!0,Xs:a?'#db0000':'#FFDA00',It:a?1:3,ii:2,ei:a?12:4,Hs:12,ci:2e3,fi:1e3,Zt:a?.25:20,ri:a?.2:6,hi:2*Math.PI,di:0,si:this.xi.y}),this.kt(n)}th(){[this.sh,this.qi,this.ih].includes(this.Ni)&&!this.Ni.$s||(this.Pt.K()>.1?this.Li?this.Ni=this.Ji:this.Ni=this.Wi:this.Li?this.Ni=this.Ei:this.Ni=this.Bi)}Hi(t,s){this.Ai=Math.max(0,this.Ai-t),this.Ti=Math.max(this.Ti,s)}ct(t){if(this.Ti=Math.max(this.Ti-t,0),this.zi=Math.max(this.zi-t,0),this.Vi=Math.max(this.Vi-t,0),this.ji=Math.max(this.ji-t,0),0===this.Ti&&(this.Ai=Math.min(100,this.Ai+1)),super.ct(t),this.th(),this.Ni.ct(),this.Ni===this.Wi&&0>this.Di){var s=Math.max(0,1-e.V(this.dt,mt.Jt.ys.dt).K()/300),i=d(this.Ss);s>.2&&4>=this.wt&&J(i?[s,,60,.01,,.07,,2.47,-.4,50.8,100,.02,,-.2,.1,,.02,,.04,.29]:[s,.1,346,,,.06,,2.23,,-2.8,140,,.01,,,,.21,.25,,.04],!0),this.Di=160}this.Di-=t}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds)))){super.St(t);var s=this.Vi>0?'#fff':void 0,i=(s=Math.sin(.02*this.ji)>0?'#1520a6':s)||'#E0AC69',h=this.Ni.Zs;t.s(),t.lineWidth=1,this.hh&&this.hh.St(t,this.Xs);var r=d(this.Ss);t.S(this.dt.x,this.dt.y-(r?0:this.Si.y)-this.ds),r&&10>=this.wt||(t.T('rgba(0,0,0,0.5'),t.g(-this.gi.x/2,5+this.wt,this.gi.x,6)),this.Ii||t.scale(-1,1),t.s(),t.T(s||'#A87D37'),t.rotate(h.shield.r),t.g(-this.ki.x/2+4+h.shield.dt.x,-this.ki.y-.1*this.xi.y+h.shield.dt.y-(r?8:0),this.ki.x,this.ki.y),t.r(),t.T(s||'#D0814E'),r&&this.wt<=this.Si.y||(t.s(),t.S(-this.Si.x/2-this.xi.x/3,-2),t.rotate(h.legL.r),t.g(0,this.Si.y,this.Si.x,this.Si.y/3),t.r(),t.s(),t.S(-this.Si.x/2+this.xi.x/3,-2),t.rotate(h.legR.r),t.g(0,this.Si.y,this.Si.x,this.Si.y/3),t.r()),t.s(),t.rotate(h.body.r),t.T(i),t.g(-this.xi.x/2+h.body.dt.x,-this.xi.y+h.body.dt.y,this.xi.x,.6*this.xi.y),r&&this.wt<=.45*this.xi.y||(t.T(s||G(this.Xs,10)),t.g(-this.xi.x/2+h.body.dt.x,.4*-this.xi.y+h.body.dt.y,this.xi.x,.45*this.xi.y)),this.Zi.St(t,h.head,s),t.r(),this.$i.St(t,h.sword,s,r),t.r()}}},U=i(0),X=i.n(U),tt=class{constructor(t,s,i=!1){this.Nt=new e,this.eh=1,this.dt=new e(t,s),this.rh=this.dt.R(),this.ah=i}ct(t){if(!this.ah){var s=this.dt.R();this.Nt.j(t*t),this.dt.j(1.985).V(this.rh.R().j(.985)).O(this.Nt),this.Nt.J(),this.rh=s}}nh(t){this.Nt.O(t)}},st=class{constructor(t,s){this.oh=t,this.fh=s,this.uh=.5,this.ph=e.L(t.dt,s.dt)}dh(){var t=this.oh.dt,s=this.fh.dt,i=e.V(t,s),h=i.K(),r=0===h?this.ph:(this.ph-h)/h,a=.5*this.uh,n=this.uh-a,o=e.j(i,a*r);this.oh.ah||(t.x+=o.x,t.y+=o.y);var c=e.j(i,n*r);return this.fh.ah||(s.x-=c.x,s.y-=c.y),h}},it=class extends Q{constructor(t){super(t),this.wh=0,this._h=0,this.Gt=4,this.Xi=25,this.Zi.li=!0,this.Xs='#990000',this.ls=this.Ht=100,this.hh=new class{constructor(t,s,i,h,r){this.lh=16,this.vh=5,this.Mh=new e(0,.25),this.mh=[],this.bh=[],this.gh=Math.ceil(h/r),this.xh=Math.ceil(i/r);for(var a=0;a<this.gh;a++)for(var n=0;n<this.xh;n++){var o=new tt(t+n*r,s+a*r,0===a);n&&this.bh.push(new st(o,this.mh[this.mh.length-1])),a&&this.bh.push(new st(o,this.mh[n+this.xh*(a-1)])),this.mh.push(o)}}ct(t,s,i){for(var h=Math.floor(t/this.lh),r=0;h>r;r++){for(var a=0;a<this.mh.length;a++){var n=this.mh[a];n.nh(this.Mh),n.ct(1/h)}for(var o=0;o<this.vh;o++)this.bh.forEach(t=>t.dh())}this.mh[0].dt=new e(s-5,i),this.mh[1].dt=new e(s+5,i);var c=X.a.M(s/1e3,(i-50)/1e3,performance.now()/2200)*Math.PI-Math.PI/2,f=new e(Math.cos(c),Math.sin(c)).D().j(.1);this.mh.map(t=>t.nh(f))}St(t,s){var i,h;for(h=1;h<this.gh;++h)for(i=1;i<this.xh;++i){t.A();var e=(h-1)*this.xh+i-1,r=h*this.xh+i;t.moveTo(this.mh[e].dt.x,this.mh[e].dt.y),t.k(this.mh[e+1].dt.x,this.mh[e+1].dt.y),t.k(this.mh[r].dt.x,this.mh[r].dt.y),t.k(this.mh[r-1].dt.x,this.mh[r-1].dt.y),t.T(s),t.fill()}}}(t.x,t.y-this.xi.y,26,37.5,13),this.sh=new j(16,Z,!1),this.ih=new j(36,$,!1)}Qi(t,s){this.wh=1e3,super.Qi(t,s)}yh(){this._h>1e3||this.Ki>0||!this.vt||0==~~this.Ai||(this.Hi(50,600),this.$t=2e3,this.Gt=2e3,setTimeout(()=>{this.It=-14,mt.Jt.bs&&mt.Jt.bs.kh(this.As.mi),mt.Jt.Ls.Ts(new S(this,new e(-100,-100),200,200)).forEach(t=>{t.zs.Qi(this,!1,!0)}),mt.Jt.Ps.it=100,J([,,463,,,.45,2,.38,-3.9,,,,,1.2,,.1,.1,.72,.02])},200),this.Ni=this.ih,this.ih.qs=0,this.Ki=this.Ri,this.zi=this.Oi)}Sh(){if(0>=this.Ci&&this.vt&&0!=~~this.Ai){if(this.Hi(10,600),this.$t=2e3,this.Nt.x+=this.Ii?5:-5,J([,.5,310,.04,.01,.13,,.29,-3.2,,,,,,,,,.74,.02]),mt.Jt.bs){var t=new C;Object.assign(t,{_t:-Math.PI/2,wi:!0,Xs:'rgba(205,190,171,0.8)',ei:40,ni:12,oi:6,ci:600,fi:200,Yt:0,di:360}),this.kt(t)}this.Ni=this.sh,this.sh.qs=0;var s=this.Ii?1:-1;mt.Jt.Ls.Ts(new S(this,new e(s*(this.xi.x/2+10+(this.Ii?0:48)),-24),48,12)).forEach(t=>{t.zs.Qi(this,!0),t.zs instanceof Q&&this.Hi(10,600)}),this.Ci=this.Pi}}ct(t){this._h+=t,this.wh=Math.max(this.wh-t,0),this.Ci=Math.max(this.Ci-t,0),this.Ki=Math.max(this.Ki-t,0),0===this.wh&&100===this.Ai&&(this.ls=Math.min(this.Ht,this.ls+.2));var s=this.Ni===this.sh;s||(V.Js&&(this.Nt.y-=3),V.Es&&(this.Nt.x-=3,this.Ii=!1),V.Bs&&(this.Nt.y+=3),V.Fs&&(this.Nt.x+=3,this.Ii=!0),V.Ds?(this.Li=!0,this.Gt=2.5,V.Ks&&this.Sh()):(this.Li=!1,this.Gt=4,V.Ks&&(this.wt>20?this.yh():this.Gi()))),V.Ws&&this.Ai>0&&0===this.wt&&(this._h=0,this.It=6,this.Hi(5,600),J([.5,1,377,.03,.09,,,.86,2.7,,-50,,,,,,,.57,.06])),(s=this.Ni===this.sh)||(this.Pt.j(0),this.Nt.D().j(3),this.$t=this.Li?100:200,this.Yt=.3,this.Gt=4),this.hh.ct(t,this.dt.x,this.dt.y-this.xi.y-this.Si.y-this.ds),super.ct(t)}},ht=class extends y{constructor(t){super(),this.ys=t,this.Ah=new R(new e(750,34),new e(12,14),0)}Th(t,s,i,h){t.miterLimit=2,t.font='20px monospace',t.strokeStyle='#000',t.lineWidth=4,t.strokeText(s,i,h),t.T('#fff'),t.fillText(s,i,h)}St(t){t.T('#fff'),t.g(9,9,202,22),t.g(9,34,202,12),t.T('#d11141'),t.g(10,10,this.ys.ls/this.ys.Ht*200,20),t.T('#00aedb'),t.g(10,35,this.ys.Ai/100*200,10),t.textAlign='right',this.Th(t,(this.Ut/1e3).toFixed(2),762,20),this.Th(t,this.ys.Fi,762,40),this.Ah.St(t,{dt:new e(-12*(''+this.ys.Fi).length,0),r:0},0)}},et=class extends Q{constructor(t){super(t),this.Oh=0,this.zh=40,this.Zt=5,this.Gt=1,this.$t=3e3,this.Xt=550,this.Xi=7,this.ls=this.Ht=50,this.Xs='#84b9d1',this.es.as.Tt.Ot=.15}ct(t){if(this.ji>0||this.Vi>0)return this.wt>4||this.Pt.j(.5),void super.ct(t);var s=this.xs();this.Oh>0?(this.Oh-=t,this.es.ps(mt.Jt.ys,3)):(s<this.Xt?s<this.zh?(this.Gi(),setTimeout(()=>{this.Oh=600},260)):this.es.us(mt.Jt.ys,3):this.es.fs(.25),this.es.rs.x>0?this.Ii=!0:0>this.es.rs.x&&(this.Ii=!1)),this.es.Ft(),this.Pt.j(0),super.ct(t)}},rt=class extends et{constructor(t){super(t),this.Zt=3,this.Gt=.5,this.$t=1500,this.Xt=700,this.Xi=24,this.ls=this.Ht=200,this.zh=60,this.xi=new e(24,36),this.gi=new e(28,36),this.Si=new e(8,8),this.yi=new e(60,6),this.ki=new e(40,40),this.Yi()}},at=()=>{for(var t=mt.Jt.bs.gs;;){var s=u(0,59),i=u(0,59),h=t[s][i].ks,r=o(new e(i,s));if(w(h)&&!d(h)&&!mt.Jt.Rs(r))return r}},nt=class extends v{constructor(){super(...arguments),this.Vh=0,this.jh=40,this.Lh=3e3,this.Ph=3e3,this.Bt=[]}ct(t){this.Bt=this.Bt.filter(t=>t.vt),this.Ph<this.Lh||(this.Ph=0,this.Bt.length<this.jh&&(this.Vh++,this.Vh&&this.Vh%10==0?this.Ch(!0):this.Ch())),this.Ph+=t}Ch(t){this.Lh=Math.max(1e3,this.Lh-10);var s=at(),i=t?new rt(s):new et(s);this.gt.kt(i),this.Bt.push(i)}},ot=class extends H{ct(t){mt.Jt.Rs(this.dt)&&(this.I=30*Math.abs(X.a.M(this.dt.x/300,this.dt.y/300,performance.now()/2600)),this.ks=this.I>16?1:0)}},ct=['#e3fd98','#d9f669','#d4ee4b','#beea41','#a9ce21'],ft=class extends y{constructor(t){var s;super(t),this.Rh=0,this.Kh=u(24,38),this.Xs=(s=ct)[~~(Math.random()*s.length)],this._t=-Math.PI/2,this.Rh=0,this._s=new S(this,new e(-10,-this.Kh),20,this.Kh,null,!0),this.ss=!1,this.Yt=10}Qi(){J([.3,1,300,.04,,.08,2,2.6,-26,,-222,.02,,,-6,.1,,.47,.03]);var t=new C;Object.assign(t,{wi:!0,Xs:this.Xs,It:1,ii:.5,ei:1,Hs:14,ci:1200,fi:200,Zt:.4,ri:.2,hi:2*Math.PI,di:0,Yt:.02}),this.kt(t),setTimeout(()=>{this.ws()},10)}ct(t){mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds-this.Kh)))&&(this.Rh=.5*X.a.M(this.dt.x/200,this.dt.y/200,performance.now()/2200),super.ct(t))}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds)))){t.s(),t.lineWidth=10,t.S(this.dt.x,this.dt.y-this.ds),t.A(),t.moveTo(0,0);var s=new e(Math.cos(this._t+this.Rh),Math.sin(this._t+this.Rh)).D().j(this.Kh);t.k(s.x,s.y),t.strokeStyle=this.Xs,t.stroke(),t.r(),super.St(t)}}},ut=class extends y{constructor(t){super(t),this.Kh=u(100,200),this.Hs=new e(.75,.5).j(this.Kh),this.Yt=10,this.ss=!1}St(t){if(mt.Jt.Rs(e.O(this.dt,new e(0,-this.ds-this.Kh/2)))){var s=X.a.M(this.dt.x/200,this.dt.y/200,performance.now()/2200)*Math.PI*2,i=new e(Math.cos(s),Math.sin(s)).D();t.s(),t.lineWidth=20,t.S(this.dt.x,this.dt.y-this.ds),t.A(),t.moveTo(0,0),t.k(0,-this.Kh),t.strokeStyle='#8b632f',t.stroke(),t.s(),t.globalAlpha=.9,t.transform(1+i.x/60,i.x/60,i.y/60,1+i.y/60,0,0),t.T('#a6da39'),t.g(-this.Hs.x/2,-this.Kh-this.Hs.y/2,this.Hs.x,this.Hs.y),t.r(),t.r(),super.St(t)}}},pt=class extends H{constructor(t,s,i,h,r,a){super(t,s,i,h,r);var n=Math.abs(X.a.M(t/10,s/10,mt.v));if(n>.94){var c=o(new e(t+Math.random(),s+Math.random()));a.kt(new ut(c))}else if(n>.5)for(var f=~~((n-.5)/.45*8),u=0;f>u;u++)c=o(new e(t+Math.random(),s+Math.random())),a.kt(new ft(c))}},dt=(t,s,i,h,e)=>{for(var r=0,a=1,n=1,o=0,c=0;h>c;c++)r+=X.a.M(t*a,s*a,i*a)*n,o+=n,n*=e,a*=2;return r/o},wt=class extends y{constructor(t,s){super(),this.gs=[],this.Dh=0;for(var i=60;i--;){for(var h=[],e=60;e--;){var r,a=dt(i/85,e/85,mt.v,3,1),n=9;0>a?n=1:.05>a?n=2:.1>a?n=3:1>a&&(n=4),a=Math.abs(a),0===n||1===n?r=new ot(e,i,20,t,n):2===n||3===n?r=new H(e,i,20+200*a,t,n):4===n&&(r=new pt(e,i,Math.min(99,20+200*a),t,n,s)),this.kt(r),h.push(r)}this.gs.push(h.reverse())}this.gs.reverse()}kh(t){this.Fh=t,this.Bh=1,this.Dh=400}ct(t){if(this.Dh=Math.max(this.Dh-t,0),this.Bh+=.15,this.Fh&&20>this.Bh)for(var s=this.gs.length;s--;)for(var i=this.gs[s],h=i.length;h--;){var e=i[h],r=Math.sqrt(Math.pow(this.Fh.x-e.mi.x,2)+Math.pow(this.Fh.y-e.mi.y,2)),a=Math.abs(this.Bh-r);e.I=1>a?Math.min(119,e.bi+40*(1-a/1)*(this.Dh/400)):e.bi}super.ct(t)}},_t=class extends A{constructor(t){super(),setTimeout(()=>{this.Eh=new y,this.bs=new wt(t,this.Eh),this.kt(this.Eh),this.kt(this.bs),this.ys=new it(at()),this.Ps.G=this.ys.dt.R(),this.Jh=new ht(this.ys),this.Eh.kt(this.ys),this.Et=new nt,this.Eh.kt(this.Et)},10)}Cs(t){this.Eh.kt(t)}ct(t){this.Jh.ct(t),this.Eh.pt=this.Eh.pt.sort((t,s)=>s.dt.y-t.dt.y),0===this.ys.ls&&(this.Wh=!0),super.ct(t)}St(t){this.Ps.ut(this.ys.dt.x,this.ys.dt.y-this.ys.ds),this.Ps.nt(t),super.St(t),this.Ps.ot(t),this.Jh.St(t)}},lt=class extends A{constructor(){super(),this.Ps.G=new e(24,-22),this.Ps.$=this.Ps.L=106,setTimeout(()=>{this.ys=new it(new e),this.kt(this.ys)},0)}St(t){this.Ps.nt(t),super.St(t),this.Ps.ot(t)}},vt=(t,s,i,h,e)=>{var r=n.x/2,a=n.x/2,o=.5*r+.5*a;t.s(),t.A(),t.moveTo(s,i+o),t.k(s-r,i+o-.5*r),t.k(s-r,i+o-h-.5*r),t.k(s,i+o-1*h),t.closePath(),t.fillStyle=t.strokeStyle=G(e,-20),t.stroke(),t.fill(),t.A(),t.moveTo(s,i+o),t.k(s+a,i+o-.5*a),t.k(s+a,i+o-h-.5*a),t.k(s,i+o-1*h),t.closePath(),t.fillStyle=t.strokeStyle=G(e,-10),t.stroke(),t.fill(),t.A(),t.moveTo(s,i-h),t.k(s-r,i-h+.5*r),t.k(s-r+a,i-h+o),t.k(s+a,i-h+.5*a),t.closePath(),t.fillStyle=t.strokeStyle=e,t.strokeStyle=G(e,-10),t.stroke(),t.fill(),t.r()},Mt=(i(1),'mjf_tls'),mt=new class{constructor(){this.qh=!1,this.Nh=!1,this.Ih=window.localStorage,this.Yh=performance.now(),this.Zh=document.getElementById('c'),this.$h=this.Zh.getContext('2d'),this.Zh.width=r,this.Zh.height=a,this.Zh.oncontextmenu=()=>!1,this.Gh=document.getElementById('tt'),this.Hh=document.getElementById('pz'),this.Qh=document.getElementById('gg'),this.Uh=document.getElementById('k'),this.Xh=document.getElementById('s'),this.te=document.getElementById('kr'),this.se=document.getElementById('sr'),window.onblur=()=>this.ie(),window.onkeydown=t=>{switch(t.code){case'KeyP':if(this.Jt.Wh)return;this.Nh?this.he():this.ie();break;case'Enter':this.qh?this.Jt.Wh&&this.ee():(this.re(),this.qh=!0,this.ae(null,this.Gh),this.ee())}},this.ne=(()=>{var{tmpC:t,tmpCtx:s}=(()=>{var t=document.createElement('canvas'),s=t.getContext('2d');return{tmpC:t,tmpCtx:s}})(),i=['#1ba5e1','#1eb8fa','#e5d9c2','#564d40','#48893e'];t.width=(n.x+1)*i.length,t.height=120*n.y+7260;for(var h=0;i.length>h;h++)for(var e=i[h],r=h*(n.x+1)+(n.x+1)/2,a=0;120>a;a++){var o=a,c=n.y*a+a*(a+1)/2;vt(s,r,c,o,e)}return t})(),this.Jt=new lt,this.oe()}oe(){this.ce=requestAnimationFrame(this.fe.bind(this))}re(){cancelAnimationFrame(this.ce)}fe(t){this.ce=requestAnimationFrame(this.fe.bind(this));var s=Math.max(0,t-this.Yh);this.ct(s),this.Yh=t}ae(t,s){t&&(t.style.display='flex'),s&&(s.style.display='none')}ie(){this.qh&&(this.re(),this.ae(this.Hh),this.Nh=!0)}he(){this.Yh=performance.now(),this.oe(),this.ae(null,this.Hh),this.Nh=!1}ot(){this.re();var t=this.Jt.ys.Fi,s=this.Jt.Ut;this.Uh.innerText=t,this.Xh.innerText=(s/1e3).toFixed(0)+'s',this.ae(this.Qh,null);var i=JSON.parse(this.Ih.getItem(Mt)||'{'kills': 0, 'time': 0}');this.te.innerText='Record: '+i.kills,this.se.innerText=`Record: ${(i.time/1e3).toFixed(0)}s`,t>i.kills&&(i.kills=t),s>i.time&&(i.time=s),this.Ih.setItem(Mt,JSON.stringify(i))}ee(){this.ae(null,this.Qh),this.v=u(0,99999),this.Jt=new _t(this.ne),setTimeout(()=>this.oe(),50)}ct(t){this.Jt.ct(t),this.Jt.Wh&&this.ot(),this.St()}St(){var{$h:t,Jt:s}=this;t.clearRect(0,0,r,a),t.T('rgba(0,0,0,0.85)'),t.g(0,0,r,a),t.s(),s.St(t),t.r()}};i(2)}]);</script></body></html>");
}

void setup()
{
  pinMode(MY_BLUE_LED_PIN, OUTPUT);   
  
  Serial.begin(115200);
  Serial.println();

  Serial.print("Setting soft-AP configuration ... ");
  Serial.println(WiFi.softAPConfig(local_IP, gateway, subnet) ? "Ready" : "Failed!");
  
  Serial.print("Starting soft-AP ... ");
  boolean result = WiFi.softAP(ssid,password);
  
  if(result == true)
  {
    Serial.println("Ready");
    IPAddress myIP = WiFi.softAPIP();
    Serial.print("AP IP address: ");
    Serial.println(myIP);
  }
  else
  {
    Serial.println("Failed!");
  }

  server.on("/", handleRoot);      
  server.on("/ninja", ninja);      
  server.on("/spartan", spartan); 

  server.begin();                  //Start server
  Serial.println("HTTP server started");
}

void loop()
{
  server.handleClient();          //Handle client requests
  
  digitalWrite(MY_BLUE_LED_PIN, LOW); 
  Serial.printf("Stations connected = %d\n", WiFi.softAPgetStationNum());
  delay(1000);
  digitalWrite(MY_BLUE_LED_PIN, HIGH); 
  delay(2000);
}
